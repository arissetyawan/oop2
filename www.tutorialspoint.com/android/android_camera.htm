<!DOCTYPE html>
<!--[if IE 8]><html class="ie ie8"> <![endif]-->
<!--[if IE 9]><html class="ie ie9"> <![endif]-->
<!--[if gt IE 9]><!-->	<html> <!--<![endif]-->
<head>
<!-- Basic -->
<meta charset="utf-8">
<title>Android Camera</title>
<meta name="description" content="Android Camera - Learn Android Programming and how to develop android mobile phone and ipad applications starting from Environment setup, application components, activity lifecycle, service lifecycle, application architecture, publishing application, debugging applications, handling events, layouts, menus, user interface controls, styles and themes, handling rotation, fonts management, send email, data storage, managing media, send sms, phone calls." />
<meta name="keywords" content="Android, programming, tutorial, beginners, develop, mobile phone, Environment Setup, Application Components, Activity Lifecycle, Service Lifecycle, Application Architecture, Publishing Application, Debugging Applications, Handling Events, Layouts, User Interface Controls, Styles and Themes, Handling Rotation, data storage, managing media, Send Email, Send SMS, Phone Calls." />
<base href="https://www.tutorialspoint.com/" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=yes">
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="website" />
<meta property="fb:app_id" content="471319149685276" />
<meta property="og:site_name" content="www.tutorialspoint.com" />
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="author" content="tutorialspoint.com">
<script type="text/javascript" src="https://www.tutorialspoint.com/theme/js/script-min-v4.js?v=2"></script>
<link rel="stylesheet" href="https://www.tutorialspoint.com/theme/css/style-min.css?v=3">
<script>
function openNav() {	
  document.getElementById("mySidenav").style.width = "250px";
  document.getElementById("right_obs").style.display = "block";
}
function closeNav() {
  document.getElementById("mySidenav").style.width = "0";
  document.getElementById("right_obs").style.display = "none";
}
function close_obs_sidenav(){
  document.getElementById("mySidenav").style.width = "0";
  document.getElementById("right_obs").style.display = "none";
}
</script>
<!-- Head Libs -->
<!--[if IE 8]>
<link rel="stylesheet" type="text/css" href="/theme/css/ie8.css">
<![endif]-->
<style>
select{ border:0 !important; outline: 1px inset black !important; outline-offset: -1px !important; }
.btnsbmt{ background: #a5c63b !important;}
ul.nav-list.primary>li a.videolink{    background: none; margin: 0px; padding: 0px; border: 1px solid #d6d6d6;}
div.feature-box div.feature-box-icon, .col-md-3 .course-box, li.heading, div.footer-copyright { background: #a5c63b url(/images/pattern.png) repeat center center !important;}
.sub-main-menu .sub-menuu div:hover, .sub-main-menu .viewall, header nav ul.nav-main li a:hover, button.btn-responsive-nav, header div.search button.btn-default { background: #a5c63b !important;}
.submenu-item{ border-bottom: 2px solid #a5c63b !important; border-top: 2px solid #a5c63b !important }
.ace_scroller{overflow: auto!important;}
a.demo{font-family: "Open Sans",Arial,sans-serif; background:#a5c63b; color:#fff; font-size:13px; padding:3px 10px; border:1px solid #d6d6d6; position:absolute; right:5px; margin:-6px 17px 0px 0px;}
a.demo:hover{opacity:.8}
</style>
<script>
$(document).ready(function() {
  $('input[name="q"]').keydown(function(event){
    if(event.keyCode == 13) {
      event.preventDefault();
      return false;
    }
  });
});
</script>
</head>
<body onload="prettyPrint()">
<div class="wrapLoader">
   <div class="imgLoader">
      <img  src="/images/loading-cg.gif" alt="" width="70" height="70" />
   </div>
</div>
<div id="right_obs" class="display-none" onclick="close_obs_sidenav()"></div>
<header>
   <div class="container">			
      <h1 class="logo">
      <a href="index.htm" title="tutorialspoint">
      <img alt="tutorialspoint" src="/android/images/logo.png">
      </a>
      </h1>			
      <ul class="tp-inline-block pull-right" id="tp-head-icons">
        <li>
           <div class="tp-second-nav tp-display-none tp-pointer" onclick="openNav()">
              <i class="fa fa-th-large fa-lg"></i>
           </div>
        </li>
     </ul>
     <button class="btn btn-responsive-nav btn-inverse" data-toggle="collapse" data-target=".nav-main-collapse" id="pull" style="top: 24px!important"> <i class="icon icon-bars"></i> </button>
      <nav>
         <ul class="nav nav-pills nav-top">
            <li><a href="/about/about_careers.htm" style="background: #fffb09; font-weight: bold;"><i class="icon icon-suitcase"></i> Jobs</a></li>
            <li> <a target="_blank" href="/programming_examples/"><i class="fa fa-cubes"></i> &nbsp;Examples</a> </li>
            <li> <a href="https://www.tutorialspoint.com/whiteboard.htm"><img src="theme/css/icons/image-editor.png" alt="Whiteboard" title="Whiteboard"> &nbsp;Whiteboard</a> </li>
            <li> <a href="https://www.tutorialspoint.com/netmeeting.php"><i class="fa-camera"></i> &nbsp;Net Meeting</a> </li>
            <li> <a href="/online_dev_tools.htm"> <i class="dev-tools-menu" style="opacity:.5"></i> Tools </a> </li>
            <li> <a href="/articles/index.php"><i class="icon icon-file-text-o"></i> &nbsp;Articles</a> </li>            
            <li class="top-icons">
              <ul class="social-icons">
              <li class="facebook"><a href="https://www.facebook.com/tutorialspointindia" target="_blank" rel="nofollow" data-placement="bottom" title="tutorialspoint @ Facebook">Facebook</a></li>
              <li class="googleplus"><a href="https://plus.google.com/u/0/116678774017490391259/posts" target="_blank" rel="nofollow" data-placement="bottom" title="tutorialspoint @ Google+">Google+</a></li>
              <li class="twitter"><a href="https://www.twitter.com/tutorialspoint" target="_blank" rel="nofollow" data-placement="bottom" title="tutorialspoint @ Twitter">Twitter</a></li>
              <li class="linkedin"><a href="https://www.linkedin.com/company/tutorialspoint" target="_blank" rel="nofollow" data-placement="bottom" title="tutorialspoint @ Linkedin">Linkedin</a></li>
              <li class="youtube"><a href="https://www.youtube.com/channel/UCVLbzhxVTiTLiVKeGV7WEBg" target="_blank" rel="nofollow" data-placement="bottom" title="tutorialspoint YouTube">YouTube</a></li>
              </ul>
           </li>
         </ul>
      </nav>
    </div>
     <div class="sidenav" id="mySidenav">
     <div class="navbar nav-main">
      <div class="container">
         <nav class="nav-main mega-menu">
            <ul class="nav nav-pills nav-main" id="mainMenu">
               <li class="dropdown no-sub-menu"> <a class="dropdown" href="index.htm"><i class="icon icon-home"></i> Home</a> </li>   
               <li class="dropdown no-sub-menu"><a class="dropdown" href="/questions/index.php"><i class="fa fa-send"></i> Q/A </a> </li>
               <li class="dropdown"><a class="dropdown" href="tutorialslibrary.htm"><span class="tut-lib"> Library </span></a></li>
               <li class="dropdown no-sub-menu"><a class="dropdown" href="videotutorials/index.htm"><i class="fa-toggle-right"></i> Videos </a></li>
               <li class="dropdown no-sub-menu"><a class="dropdown" href="tutor_connect/index.php"><i class="fa-user"> </i> Tutors</a></li>
               <li class="dropdown no-sub-menu"><a class="dropdown" href="codingground.htm"><i class="fa-code"></i> Coding Ground </a> </li>
               <li class="dropdown no-sub-menu"><a class="dropdown" href="https://store.tutorialspoint.com/"><i class="fa-usd"></i> Store </a> </li>
               <li class="dropdown no-sub-menu">
                  <div class="searchform-popup">
                     <input class="header-search-box" type="text" id="search-string" name="q" placeholder="Search your favorite tutorials..." onfocus="if (this.value == 'Search your favorite tutorials...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search your favorite tutorials...';}" autocomplete="off">
                     <div class="magnifying-glass"><i class="icon-search"></i> Search </div>
                 </div>
               </li>
            </ul>
         </nav>
        </div>
      </div>	
     </div>	
   </div>	
</header>
<div style="clear:both;"></div>
<div role="main" class="main">
<div class="container">
<div class="row">
<div class="col-md-2">
<aside class="sidebar">
<div class="mini-logo">
<img src="/android/images/android-mini-logo.jpg" alt="Android Tutorial" />
</div>
<ul class="nav nav-list primary left-menu" >
<li><a class="videolink" href="/android_online_training/index.asp" target="_blank"><img src="/android/images/android-video-tutorials.jpg" alt="Android Video Tutorials" /></a></li>
</ul>
<ul class="nav nav-list primary left-menu">
<li class="heading">Android Basics</li>
<li><a target="_top" href="/android/index.htm">Android - Home</a></li>
<li><a target="_top" href="/android/android_overview.htm">Android - Overview</a></li>
<li><a target="_top" href="/android/android_environment_setup.htm">Android - Environment Setup</a></li>
<li><a target="_top" href="/android/android_architecture.htm">Android - Architecture</a></li>
<li><a target="_top" href="/android/android_application_components.htm">Android - Application Components</a></li>
<li><a target="_top" href="/android/android_hello_world_example.htm">Android - Hello World Example</a></li>
<li><a target="_top" href="/android/android_resources.htm">Android - Resources</a></li>
<li><a target="_top" href="/android/android_acitivities.htm">Android - Activities</a></li>
<li><a target="_top" href="/android/android_services.htm">Android - Services</a></li>
<li><a target="_top" href="/android/android_broadcast_receivers.htm">Android - Broadcast Receivers</a></li>
<li><a target="_top" href="/android/android_content_providers.htm">Android - Content Providers</a></li>
<li><a target="_top" href="/android/android_fragments.htm">Android - Fragments</a></li>
<li><a target="_top" href="/android/android_intents_filters.htm">Android - Intents/Filters</a></li>
</ul>
<ul class="nav nav-list primary left-menu">
<li class="heading">Android - User Interface</li>
<li><a target="_top" href="/android/android_user_interface_layouts.htm">Android - UI Layouts</a></li>
<li><a target="_top" href="/android/android_user_interface_controls.htm">Android - UI Controls</a></li>
<li><a target="_top" href="/android/android_event_handling.htm">Android - Event Handling</a></li>
<li><a target="_top" href="/android/android_styles_and_themes.htm">Android - Styles and Themes</a></li>
<li><a target="_top" href="/android/android_custom_components.htm">Android - Custom Components</a></li>
</ul>
<ul class="nav nav-list primary left-menu">
<li class="heading">Android Advanced Concepts</li>
<li><a target="_top" href="/android/android_drag_and_drop.htm">Android - Drag and Drop</a></li>
<li><a target="_top" href="/android/android_notifications.htm">Android - Notifications</a></li>
<li><a target="_top" href="/android/android_location_based_services.htm">Location Based Services</a></li>
<li><a target="_top" href="/android/android_sending_email.htm">Android - Sending Email</a></li>
<li><a target="_top" href="/android/android_sending_sms.htm">Android - Sending SMS</a></li>
<li><a target="_top" href="/android/android_phone_calls.htm">Android - Phone Calls</a></li>
<li><a target="_top" href="/android/android_publishing_application.htm">Publishing Android Application</a></li>
</ul>
<ul class="nav nav-list primary left-menu">
<li class="heading">Android Useful Examples</li>
<li><a target="_top" href="/android/android_alert_dialoges.htm">Android - Alert Dialoges</a>
<li><a target="_top" href="/android/android_animations.htm">Android - Animations</a>
<li><a target="_top" href="/android/android_audio_capture.htm">Android - Audio Capture</a>
<li><a target="_top" href="/android/android_audiomanager.htm">Android - AudioManager</a>
<li><a target="_top" href="/android/android_auto_complete.htm">Android - Auto Complete</a>
<li><a target="_top" href="/android/android_best_practices.htm">Android - Best Practices</a>
<li><a target="_top" href="/android/android_bluetooth.htm">Android - Bluetooth</a>
<li><a target="_top" href="/android/android_camera.htm">Android - Camera</a>
<li><a target="_top" href="/android/android_clipboard.htm">Android - Clipboard</a>
<li><a target="_top" href="/android/android_custom_fonts.htm">Android - Custom Fonts</a>
<li><a target="_top" href="/android/android_data_backup.htm">Android - Data Backup</a>
<li><a target="_top" href="/android/android_developer_tools.htm">Android - Developer Tools</a>
<li><a target="_top" href="/android/android_emulator.htm">Android - Emulator</a>
<li><a target="_top" href="/android/android_facebook_integration.htm">Android - Facebook Integration</a>
<li><a target="_top" href="/android/android_gestures.htm">Android - Gestures</a>
<li><a target="_top" href="/android/android_google_maps.htm">Android - Google Maps</a>
<li><a target="_top" href="/android/android_image_effects.htm">Android - Image Effects</a>
<li><a target="_top" href="/android/android_imageswitcher.htm">Android - ImageSwitcher</a>
<li><a target="_top" href="/android/android_internal_storage.htm">Android - Internal Storage</a>
<li><a target="_top" href="/android/android_jetplayer.htm">Android - JetPlayer</a>
<li><a target="_top" href="/android/android_json_parser.htm">Android - JSON Parser</a>
<li><a target="_top" href="/android/android_linkedin_integration.htm">Android - Linkedin Integration</a>
<li><a target="_top" href="/android/android_loading_spinner.htm">Android - Loading Spinner</a>
<li><a target="_top" href="/android/android_localization.htm">Android - Localization</a>
<li><a target="_top" href="/android/android_login_screen.htm">Android - Login Screen</a>
<li><a target="_top" href="/android/android_mediaplayer.htm">Android - MediaPlayer</a>
<li><a target="_top" href="/android/android_multitouch.htm">Android - Multitouch</a>
<li><a target="_top" href="/android/android_navigation.htm">Android - Navigation</a>
<li><a target="_top" href="/android/android_network_connection.htm">Android - Network Connection</a>
<li><a target="_top" href="/android/android_nfc_guide.htm">Android - NFC Guide</a>
<li><a target="_top" href="/android/android_php_mysql.htm">Android - PHP/MySQL</a>
<li><a target="_top" href="/android/android_progress_circle.htm">Android - Progress Circle</a>
<li><a target="_top" href="/android/android_progressbar.htm">Android - ProgressBar</a>
<li><a target="_top" href="/android/android_push_notification.htm">Android - Push Notification</a>
<li><a target="_top" href="/android/android_renderscript.htm">Android - RenderScript</a>
<li><a target="_top" href="/android/android_rss_reader.htm">Android - RSS Reader</a>
<li><a target="_top" href="/android/android_screen_cast.htm">Android - Screen Cast</a>
<li><a target="_top" href="/android/android_sdk_manager.htm">Android - SDK Manager</a>
<li><a target="_top" href="/android/android_sensors.htm">Android - Sensors</a>
<li><a target="_top" href="/android/android_session_management.htm">Android - Session Management</a>
<li><a target="_top" href="/android/android_shared_preferences.htm">Android - Shared Preferences</a>
<li><a target="_top" href="/android/android_sip_protocol.htm">Android - SIP Protocol</a>
<li><a target="_top" href="/android/android_spelling_checker.htm">Android - Spelling Checker</a>
<li><a target="_top" href="/android/android_sqlite_database.htm">Android - SQLite Database</a>
<li><a target="_top" href="/android/android_support_library.htm">Android - Support Library</a>
<li><a target="_top" href="/android/android_testing.htm">Android - Testing</a>
<li><a target="_top" href="/android/android_text_to_speech.htm">Android - Text to Speech</a>
<li><a target="_top" href="/android/android_textureview.htm">Android - TextureView</a>
<li><a target="_top" href="/android/android_twitter_integration.htm">Android - Twitter Integration</a>
<li><a target="_top" href="/android/android_ui_design.htm">Android - UI Design</a>
<li><a target="_top" href="/android/android_ui_patterns.htm">Android - UI Patterns</a>
<li><a target="_top" href="/android/android_ui_testing.htm">Android - UI Testing</a>
<li><a target="_top" href="/android/android_webview_layout.htm">Android - WebView Layout</a>
<li><a target="_top" href="/android/android_wi_fi.htm">Android - Wi-Fi</a>
<li><a target="_top" href="/android/android_widgets.htm">Android - Widgets</a>
<li><a target="_top" href="/android/android_xml_parsers.htm">Android - XML Parsers</a>
</ul>
<ul class="nav nav-list primary left-menu" >
<li class="heading">Android Useful Resources</li>
<li><a target="_top" href="/android/android_questions_answers.htm">Android - Questions and Answers</a></li>
<!--<li><a target="_top" href="/android/android_quick_guide.htm">Android - Quick Guide</a></li>-->
<li><a target="_top" href="/android/android_useful_resources.htm">Android - Useful Resources</a></li>
<li><a target="_top" href="/android/android_discussion.htm">Android - Discussion</a></li>
</ul>
<ul class="nav nav-list primary push-bottom left-menu special">
<li class="sreading">Selected Reading</li>
<li><a target="_top" href="/upsc_ias_exams.htm">UPSC IAS Exams Notes</a></li>
<li><a target="_top" href="/developers_best_practices/index.htm">Developer's Best Practices</a></li>
<li><a target="_top" href="/questions_and_answers.htm">Questions and Answers</a></li>
<li><a target="_top" href="/effective_resume_writing.htm">Effective Resume Writing</a></li>
<li><a target="_top" href="/hr_interview_questions/index.htm">HR Interview Questions</a></li>
<li><a target="_top" href="/computer_glossary.htm">Computer Glossary</a></li>
<li><a target="_top" href="/computer_whoiswho.htm">Who is Who</a></li>
</ul>
</aside>
</div>
<!-- PRINTING STARTS HERE -->
<div class="row">
<div class="content">
<div class="col-md-7 middle-col">
<h1>Android - Camera</h1>
<hr />
<div style="padding-bottom:5px;padding-left:10px;text-align: center;">Advertisements</div>
<div style="text-align: center;">
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
src="https://pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
<hr />
<div class="pre-btn">
<a href="/android/android_bluetooth.htm"><i class="icon icon-arrow-circle-o-left big-font"></i> Previous Page</a>
</div>
<div class="nxt-btn">
<a href="/android/android_clipboard.htm">Next Page <i class="icon icon-arrow-circle-o-right big-font"></i>&nbsp;</a>
</div>
<div class="clearer"></div>
<hr />
<p>These are the following two ways, in which you can use camera in your application</p>
<ul class="list">
<li><p>Using existing android camera application in our application</p></li>
<li><p>Directly using Camera API provided by android in our application</p></li>
</ul>
<h2>Using existing android camera application in our application</h2>
<p>You will use MediaStore.ACTION_IMAGE_CAPTURE to launch an existing camera application installed on your phone. Its syntax is given below</p>
<pre class="prettyprint notranslate">
Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
</pre>
<p>Apart from the above, there are other available Intents provided by MediaStore. They are listed as follows</p>
<table class="table table-bordered">
<tr>
<th style="text-align:center">Sr.No</th>
<th style="text-align:center">Intent type and description</th>
</tr>
<tr>
<td style="text-align:center;vertical-align:middle">1</td>
<td>
<p><b>ACTION_IMAGE_CAPTURE_SECURE</b></p>
<p>It returns the image captured from the camera , when the device is secured</p>
</td>
</tr>
<tr>
<td style="text-align:center;vertical-align:middle">2</td>
<td>
<p><b>ACTION_VIDEO_CAPTURE</b></p>
<p>It calls the existing video application in android to capture video</p>
</td>
</tr>
<tr>
<td style="text-align:center;vertical-align:middle">3</td>
<td>
<p><b>EXTRA_SCREEN_ORIENTATION</b></p>
<p>It is used to set the orientation of the screen to vertical or landscape</p>
</td>
</tr>
<tr>
<td style="text-align:center;vertical-align:middle">4</td>
<td>
<p><b>EXTRA_FULL_SCREEN</b></p>
<p>It is used to control the user interface of the ViewImage</p>
</td>
</tr>
<tr>
<td style="text-align:center;vertical-align:middle">5</td>
<td>
<p><b>INTENT_ACTION_VIDEO_CAMERA</b></p>
<p>This intent is used to launch the camera in the video mode</p>
</td>
</tr>
<tr>
<td style="text-align:center;vertical-align:middle">6</td>
<td>
<p><b>EXTRA_SIZE_LIMIT</b></p>
<p>It is used to specify the size limit of video or image capture size</p>
</td>
</tr>
</table>
<p>Now you will use the function <i>startActivityForResult()</i> to launch this activity and wait for its result. Its syntax is given below</p>
<pre class="prettyprint notranslate">
startActivityForResult(intent,0)
</pre>
<p>This method has been defined in the <b>activity</b> class. We are calling it from main activity. There are methods defined in the activity class that does the same job , but used when you are not calling from the activity but from somewhere else. They are listed below</p>
<table class="table table-bordered">
<tr>
<th style="text-align:center">Sr.No</th>
<th style="text-align:center">Activity function description</th>
</tr>
<tr>
<td style="text-align:center;vertical-align:middle">1</td>
<td>
<p><b>startActivityForResult(Intent intent, int requestCode, Bundle options)</b></p>
<p>It starts an activity , but can take extra bundle of options with it</p>
</td>
</tr>
<tr>
<td style="text-align:center;vertical-align:middle">2</td>
<td>
<p><b>startActivityFromChild(Activity child, Intent intent, int requestCode)</b></p>
<p>It launch the activity when your activity is child of any other activity</p>
</td>
</tr>
<tr>
<td style="text-align:center;vertical-align:middle">3</td>
<td>
<p><b>startActivityFromChild(Activity child, Intent intent, int requestCode, Bundle options)</b></p>
<p>It work same as above , but it can take extra values in the shape of bundle with it</p>
</td>
</tr>
<tr>
<td style="text-align:center;vertical-align:middle">4</td>
<td>
<p><b>startActivityFromFragment(Fragment fragment, Intent intent, int requestCode)</b></p>
<p>It launches activity from the fragment you are currently inside</p>
</td>
</tr>
<tr>
<td style="text-align:center;vertical-align:middle">5</td>
<td>
<p><b>startActivityFromFragment(Fragment fragment, Intent intent, int requestCode, Bundle options)</b></p>
<p>It not only launches the activity from the fragment , but can take extra values with it</p>
</td>
</tr>
</table>
<p>No matter which function you used to launch the activity , they all return the result. The result can be obtained by overriding the function <i>onActivityResult</i>.</p>
<h2>Example</h2>
<p>Here is an example that shows how to launch the existing camera application to capture an image and display the result in the form of bitmap.</p>
<p>To experiment with this example , you need to run this on an actual device on which camera is supported.</p>
<table class="table table-bordered">
<tr>
<th style="text-align:center">Steps</th>
<th style="text-align:center">Description</th>
</tr>
<tr>
<td style="text-align:center">1</td>
<td>You will use Android studio IDE to create an Android application and name it as Camera under a com.example.sairamkrishna.myapplication.</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td>Modify src/MainActivity.java file to add intent code to launch the Camera.
</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td>Modify layout XML file res/layout/activity_main.xml</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td>Add the Camera permission and run the application and choose a running android device and install the application on it and verify the results.</td>
</tr>
</table>
<p>Following is the content of the modified main activity file <b>src/MainActivity.java.</b></p>
<pre class="prettyprint notranslate">
package com.example.sairamkrishna.myapplication;

import android.Manifest;
import android.app.Activity;
import android.app.AlertDialog;

import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.pm.PackageManager;

import android.net.Uri;
import android.os.Bundle;
import android.provider.Settings;

import android.support.v4.app.ActivityCompat;
import android.support.v4.content.ContextCompat;
import android.support.v7.app.AppCompatActivity;
import android.support.v7.widget.Toolbar;

public class MainActivity extends AppCompatActivity {
   public static final int MY_PERMISSIONS_REQUEST_CAMERA = 100;
   public static final String ALLOW_KEY = "ALLOWED";
   public static final String CAMERA_PREF = "camera_pref";

   @Override
   protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);

      if (ContextCompat.checkSelfPermission(this, Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED) {
         if (getFromPref(this, ALLOW_KEY)) {
            showSettingsAlert();
         } else if (ContextCompat.checkSelfPermission(this,
            Manifest.permission.CAMERA)
            
            != PackageManager.PERMISSION_GRANTED) {
               
               // Should we show an explanation?
               if (ActivityCompat.shouldShowRequestPermissionRationale(this,
                  Manifest.permission.CAMERA)) {
                  showAlert();
               } else {
                  // No explanation needed, we can request the permission.
                  ActivityCompat.requestPermissions(this,
                     new String[]{Manifest.permission.CAMERA},
                     MY_PERMISSIONS_REQUEST_CAMERA);
               }
            }
      } else {
         openCamera();
      }
      
   }
   public static void saveToPreferences(Context context, String key, Boolean allowed) {
      SharedPreferences myPrefs = context.getSharedPreferences(CAMERA_PREF, 
         Context.MODE_PRIVATE);
      SharedPreferences.Editor prefsEditor = myPrefs.edit();
      prefsEditor.putBoolean(key, allowed);
      prefsEditor.commit();
   }
		
   public static Boolean getFromPref(Context context, String key) {
      SharedPreferences myPrefs = context.getSharedPreferences(CAMERA_PREF, 
         Context.MODE_PRIVATE);
      return (myPrefs.getBoolean(key, false));
   }
		
   private void showAlert() {
      AlertDialog alertDialog = new AlertDialog.Builder(MainActivity.this).create();
      alertDialog.setTitle("Alert");
      alertDialog.setMessage("App needs to access the Camera.");
      
      alertDialog.setButton(AlertDialog.BUTTON_NEGATIVE, "DONT ALLOW",
         new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
               dialog.dismiss();
               finish();
            }
      });
			
      alertDialog.setButton(AlertDialog.BUTTON_POSITIVE, "ALLOW",
         new DialogInterface.OnClickListener() {
         
            public void onClick(DialogInterface dialog, int which) {
               dialog.dismiss();
               ActivityCompat.requestPermissions(MainActivity.this,
               new String[]{Manifest.permission.CAMERA},
               MY_PERMISSIONS_REQUEST_CAMERA);
            }
      });
      alertDialog.show();
   }
		
   private void showSettingsAlert() {
      AlertDialog alertDialog = new AlertDialog.Builder(MainActivity.this).create();
      alertDialog.setTitle("Alert");
      alertDialog.setMessage("App needs to access the Camera.");
      
      alertDialog.setButton(AlertDialog.BUTTON_NEGATIVE, "DONT ALLOW",
         new DialogInterface.OnClickListener() {
         
            public void onClick(DialogInterface dialog, int which) {
               dialog.dismiss();
               //finish();
            }
      });
			
      alertDialog.setButton(AlertDialog.BUTTON_POSITIVE, "SETTINGS",
         new DialogInterface.OnClickListener() {
                    
            public void onClick(DialogInterface dialog, int which) {
               dialog.dismiss();
               startInstalledAppDetailsActivity(MainActivity.this);
            }
      });
			
      alertDialog.show();
   }
		
   @Override
   public void onRequestPermissionsResult(int requestCode, String permissions[], int[] grantResults) {
      switch (requestCode) {
         case MY_PERMISSIONS_REQUEST_CAMERA: {
            for (int i = 0, len = permissions.length; i &lt; len; i++) {
               String permission = permissions[i];
            
               if (grantResults[i] == PackageManager.PERMISSION_DENIED) {
                  boolean 
                  showRationale = 
                     ActivityCompat.shouldShowRequestPermissionRationale(
                     this, permission);
                  
                  if (showRationale) {
                     showAlert();
                  } else if (!showRationale) {
                     // user denied flagging NEVER ASK AGAIN
                     // you can either enable some fall back,
                     // disable features of your app
                     // or open another dialog explaining
                     // again the permission and directing to
                     // the app setting
                     saveToPreferences(MainActivity.this, ALLOW_KEY, true);
                  }
               }
            }
         }
         
         // other 'case' lines to check for other
         // permissions this app might request
      }
   }
		
   @Override
   protected void onResume() {
      super.onResume();
   }
		
   public static void startInstalledAppDetailsActivity(final Activity context) {
      if (context == null) {
         return;
      }
			
      final Intent i = new Intent();
      i.setAction(Settings.ACTION_APPLICATION_DETAILS_SETTINGS);
      i.addCategory(Intent.CATEGORY_DEFAULT);
      i.setData(Uri.parse("package:" + context.getPackageName()));
      i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
      i.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
      i.addFlags(Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);
      context.startActivity(i);
   }
		
   private void openCamera() {
      Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
      startActivity(intent);
   }
}
</pre>
<p>Following will be the content of <b>res/layout/activity_main.xml file</b>&minus;</p>
<pre class="prettyprint notranslate">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:tools="http://schemas.android.com/tools"
      android:layout_width="match_parent"
   android:layout_height="match_parent" 
   android:paddingLeft="@dimen/activity_horizontal_margin"
   android:paddingRight="@dimen/activity_horizontal_margin"
   android:paddingTop="@dimen/activity_vertical_margin"
   android:paddingBottom="@dimen/activity_vertical_margin" tools:context=".MainActivity"&gt;
&lt;/RelativeLayout&gt;
</pre>
<p>Following will be the content of <b>res/values/strings.xml</b> to define one new constants</p>
<pre class="prettyprint notranslate">
&lt;resources&gt;
   &lt;string name="app_name"&gt;My Application&lt;/string&gt;
&lt;/resources&gt;
</pre>
<p>Following is the default content of <b>AndroidManifest.xml</b> &minus;</p>
<pre class="prettyprint notranslate">
&lt;?xml version="1.0" encoding="utf-8"?>
&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"
   package="com.example.sairamkrishna.myapplication" &gt;
  &lt;uses-permission android:name="android.permission.CAMERA" /&gt;
   &lt;application
      android:allowBackup="true"
      android:icon="@drawable/ic_launcher"
      android:label="@string/app_name"
      android:theme="@style/AppTheme" &gt;
      
      &lt;activity
         android:name="com.example.sairamkrishna.myapplication.MainActivity"
         android:label="@string/app_name" &gt;
         
         &lt;intent-filter&gt;
            &lt;action android:name="android.intent.action.MAIN" /&gt;
            &lt;category android:name="android.intent.category.LAUNCHER" /&gt;
         &lt;/intent-filter&gt;
         
     &lt;/activity&gt;
     
   &lt;/application&gt;
&lt;/manifest&gt;
</pre>
<p>Let's try to run your application. I assume you have connected your actual Android Mobile device with your computer. To run the app from android studio, open one of your project's activity files and click Run <img  class="inline" src="/android/images/eclipse_run.jpg" alt="Eclipse Run Icon" /> icon from the tool bar. Before starting your application, Android studio will display following window to select an option where you want to run your Android application.</p>
<img src="/android/images/choose_device.jpg" alt="Anroid Camera Tutorial" />
<p>Select your mobile device as an option and then check your mobile device which will open the camera and display following screen &minus;</p>
<img src="/android/images/camera2.jpg" alt="Anroid Camera Tutorial" />
<hr />
<div class="pre-btn">
<a href="/android/android_bluetooth.htm"><i class="icon icon-arrow-circle-o-left big-font"></i> Previous Page</a>
</div>
<div class="print-btn center">
<a href="/cgi-bin/printpage.cgi" target="_blank"><i class="icon icon-print big-font"></i> Print</a>
</div>
<div class="nxt-btn">
<a href="/android/android_clipboard.htm">Next Page <i class="icon icon-arrow-circle-o-right big-font"></i>&nbsp;</a>
</div>
<hr />
<!-- PRINTING ENDS HERE -->
<div class="bottomgooglead">
<div class="bottomadtag">Advertisements</div>
<script><!--
var width = 580;
var height = 400;
var format = "580x400_as";
if( window.innerWidth < 468 ){
   width = 300;
   height = 250;
   format = "300x250_as";
}
google_ad_client = "pub-7133395778201029";
google_ad_width = width;
google_ad_height = height;
google_ad_format = format;
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
</div>
</div>
<div class="row">
<div class="col-md-3" id="rightbar">
<div class="simple-ad">
<a href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://www.facebook.com/sharer.php?u=' + 'https://www.tutorialspoint.com/android/android_camera.htm','sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;">
<img src="/images/facebookIcon.jpg" alt="img" />
</a>
<a  href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://twitter.com/share?url=' + 'https://www.tutorialspoint.com/android/android_camera.htm','sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;">
<img src="/images/twitterIcon.jpg" alt="img" />
</a>
<a  href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://www.linkedin.com/cws/share?url=' + 'https://www.tutorialspoint.com/android/android_camera.htm&amp;title='+ document.title,'sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;">
<img src="/images/linkedinIcon.jpg" alt="img" />
</a>
<a  href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://plus.google.com/share?url=https://www.tutorialspoint.com/android/android_camera.htm','sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;">
<img src="/images/googlePlusIcon.jpg" alt="img" />
</a>
<a  href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://www.stumbleupon.com/submit?url=https://www.tutorialspoint.com/android/android_camera.htm&amp;title='+ document.title,'sharer','toolbar=0,status=0,width=626,height=456,top='+sTop+',left='+sLeft);return false;">
<img src="/images/StumbleUponIcon.jpg" alt="img" />
</a>
<a  href="javascript:void(0)" onclick="var sTop = window.screen.height/2-(218); var sLeft = window.screen.width/2-(313);window.open('https://reddit.com/submit?url=https://www.tutorialspoint.com/android/android_camera.htm&amp;title='+ document.title,'sharer','toolbar=0,status=0,width=626,height=656,top='+sTop+',left='+sLeft);return false;">
<img src="/images/reddit.jpg" alt="img" />
</a>
</div>
<div class="rightgooglead">
<script><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 300;
google_ad_height = 250;
google_ad_format = "300x250_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<div class="rightgooglead">
<script><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 300;
google_ad_height = 600;
google_ad_format = "300x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<div class="rightgooglead">
<script><!--
google_ad_client = "ca-pub-2537027957187252";
/* Right Side Ad */
google_ad_slot = "right_side_ad";
google_ad_width = 300;
google_ad_height = 250;
//-->
</script>
<script src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
</div>
</div>
</div>
</div>
</div>

<div class="footer-copyright">
<div class="container">
<div class="row">
<div class="col-md-1">
<a href="index.htm" class="logo"> <img alt="Tutorials Point" class="img-responsive" src="/scripts/img/logo-footer.png"> </a>
</div>
<div class="col-md-4 col-sm-12 col-xs-12">
   <nav id="sub-menu">
      <ul>
         <li><a href="/about/faq.htm">FAQ's</a></li>
         <li><a href="/about/about_privacy.htm#cookies">Cookies Policy</a></li>
         <li><a href="/about/contact_us.htm">Contact</a></li>
      </ul>
   </nav>
</div>
<div class="col-md-3 col-sm-12 col-xs-12">
<p>&copy; Copyright 2018. All Rights Reserved.</p>
</div>
<div class="col-md-4 col-sm-12 col-xs-12">
   <div class="news-group">
      <input type="text" class="form-control-foot search" name="textemail" id="textemail" autocomplete="off" placeholder="Enter email for newsletter" onfocus="if (this.value == 'Enter email for newsletter...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Enter email for newsletter...';}">
      <span class="input-group-btn"> <button class="btn btn-default btn-footer" id="btnemail" type="submit" onclick="javascript:void(0);">go</button> </span>
      <div id="newsresponse"></div>
   </div>
</div>
</div>
</div>
</div>
</div>
<!-- Libs -->
<script src="/theme/js/custom-min.js?v=7"></script>
<script src="https://www.google-analytics.com/urchin.js">
</script>
<script>
_uacct = "UA-232293-6";
urchinTracker();
$('.pg-icon').click(function(){
   $('.wrapLoader').show();
});
</script>
</div>
</body>
</html>
