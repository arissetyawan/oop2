$(document).ready(function(){function z(){$(".wrapLoader").css({display:"block"});$("#cc").layout("panel","east").panel("options").collapsed&&$("#cc").layout("expand","east");$("#cc").layout("panel","east").panel({title:"Resize",iconCls:"fa-arrows-alt mini-icon"});$("#canvasTextBox").hide();$(".subProperties").hide();$("#isource").hide();$("#canvas-box").show();$("#resize-options").show();$("#resizeWidth").val(Math.ceil(c.getWidth()));$("#resizeHeight").val(Math.ceil(c.getHeight()));c.set({hasControls:!0,
hasRotatingPoint:!1,hasBorders:!1,borderColor:"#aaa",cornerColor:"#aaa"});c.setControlsVisibility({mt:!0,mb:!0,ml:!0,mr:!0,tr:!0,tl:!0,br:!0,bl:!0});g.renderAll();$(".wrapLoader").css({display:"none"});$("#rangeSlide").slider({min:1,max:4E3,value:m,onChange:function(a,b){var d=Math.ceil(n/m*a);c.height=d;c.width=a;e=!0;$("#resizeWidth").val(a);$("#resizeHeight").val(d);$("#resizeAspectRatio option:eq(0)").prop("selected",!0);$("#resizePct option:eq(0)").prop("selected",!0);g.centerObject(c);c.setCoords();
g.setActiveObject(c);g.renderAll()}})}function A(){$(".wrapLoader").css({display:"block"});$("#cc").layout("panel","east").panel("options").collapsed&&$("#cc").layout("expand","east");$("#canvasTextBox").hide();$(".subProperties").hide();$("#isource").hide();$("#canvas-box").show();$("#rotate-options").show();$("#cc").layout("panel","east").panel({title:"Rotate",iconCls:"fa-rotate-left mini-icon"});c.set({hasControls:!0,hasRotatingPoint:!0,hasBorders:!0,borderColor:"#aaa",cornerColor:"#aaa"});c.setControlsVisibility({mt:!1,
mb:!1,ml:!1,mr:!1,tr:!1,tl:!1,br:!1,bl:!1});g.renderAll();$(".wrapLoader").css({display:"none"})}function B(){$(".wrapLoader").css({display:"block"});$("#cc").layout("panel","east").panel("options").collapsed&&$("#cc").layout("expand","east");$("#canvasTextBox").hide();$(".subProperties").hide();$("#isource").hide();$("#canvas-box").show();$("#imgeffect-options").show();$("#cc").layout("panel","east").panel({title:"Image Effects",iconCls:"fa-file-image-o mini-icon"});c.set({hasControls:!1,hasRotatingPoint:!1,
hasBorders:!1,borderColor:"#aaa",cornerColor:"#aaa"});c.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,tr:!1,tl:!1,br:!1,bl:!1});g.renderAll();$(".wrapLoader").css({display:"none"})}function C(){$("#cc").layout("panel","east").panel("options").collapsed&&$("#cc").layout("expand","east");$("#cc").layout("panel","east").panel({title:"Crop",iconCls:"fa-crop mini-icon"});$("#canvasTextBox").hide();$(".subProperties").hide();$("#crop-options").show();$("#isource").show();$("#canvas-box").hide();$("#isource").Jcrop({onChange:fa,
onSelect:ga,onRelease:ha},function(){d=this;100<$("#isource").width()&&100<$("#isource").height()?(d.setSelect([50,50,$("#isource").width()-50,$("#isource").height()-50]),$("#cropWidth").val($("#isource").width()-100),$("#cropHeight").val($("#isource").height()-100)):(d.setSelect([0,0,$("#isource").width(),$("#isource").height()]),$("#cropWidth").val($("#isource").width()),$("#cropHeight").val($("#isource").height()));if(0<c.top){$(".jcrop-holder").css("margin-top",0);$(".jcrop-holder").css("top",
c.top);var a=$(".jcrop-holder").position().left,a=a-4;$(".jcrop-holder").css("left",a)}})}function fa(a){e=!0;$("#x1").val(Math.round(a.x));$("#y1").val(Math.round(a.y));$("#x2").val(Math.round(a.x2));$("#y2").val(Math.round(a.y2));$("#w").val(Math.round(a.w));$("#h").val(Math.round(a.h));$("#cropWidth").val(Math.ceil(a.w));$("#cropHeight").val(Math.ceil(a.h))}function ga(a){e=!0;$("#x1").val(Math.round(a.x));$("#y1").val(Math.round(a.y));$("#x2").val(Math.round(a.x2));$("#y2").val(Math.round(a.y2));
$("#w").val(Math.round(a.w));$("#h").val(Math.round(a.h));$("#cropWidth").val(Math.ceil(a.w));$("#cropHeight").val(Math.ceil(a.h))}function ha(a){e=!1}function D(){$("#cc").layout("panel","east").panel("options").collapsed&&$("#cc").layout("expand","east");$(".subProperties").hide();$("#text-options").show();$("#cc").layout("panel","east").panel({title:"Text",iconCls:"fa-text-height mini-icon"});var a=$("#isource").css("top");$("#canvasTextBox").html('<canvas id="dynamicCanvas" ></canvas>');$("#canvasTextBox").show();
k=new fabric.Canvas("dynamicCanvas");$("#canvasTextBox .canvas-container").css({margin:"0 auto",position:"relative",top:a});k.setHeight(n);k.setWidth(m);a=$("#isource").attr("src");fabric.Image.fromURL(a,function(a){U=a;k.centerObject(a);k.renderAll();a.set({cornerColor:"#969696",hasControls:!1,hasRotatingPoint:!1,hasBorders:!1,selectable:!1});k.add(a);da(E);E++;k.renderAll();$("#isource").hide();$("#canvas-box").hide();$(".wrapLoader").css({display:"none"})});k.on("mouse:move",function(a){$("#x_axis").val(parseInt(a.e.offsetX-
c.left));$("#y_axis").val(parseInt(a.e.offsetY-c.top));var b=k.getContext("2d"),d=k.getPointer(a.e);a=parseInt(d.x);d=parseInt(d.y);a=b.getImageData(a,d,1,1).data;b="rgb("+a[0]+" , "+a[1]+" ,"+a[2]+")";a="#"+("000000"+F(a[0],a[1],a[2])).slice(-6);$("#hexaColor").val(a);$("#hexaColorPicker").val(a);$("#txtColor").val(b)})}function da(a){e=!0;V[a]="Sample Text";W[a]="Times New Roman";X[a]="left";Y[a]="20";Z[a]="normal";aa[a]="#ff0000";$(".divStyleBold i, .divStyleItalic i").css({"background-color":"#ffffff",
color:"#000000"});$(".divAlign i").css({"background-color":"#ffffff",color:"#000000"});$("#alignleft i").css({"background-color":"#424242",color:"#ffffff"});p[a]=new fabric.IText(V[a],{fill:aa[a],hasControls:!0,hasBorders:!0,hasRotatingPoint:!0});p[a].set({top:U.getHeight()/2-p[a].getBoundingRectHeight()/2,left:U.getWidth()/2-p[a].getBoundingRectWidth()/2,fontFamily:W[a],textAlign:X[a],fontStyle:Z[a],fontSize:Y[a],padding:5});p[a].on("editing:entered",function(a){$("#txtStyle").val(this.getFontFamily());
$("#txtText").val(this.getText());$("#txtTextSize").val(this.getFontSize());$("#txtClrVal").val(this.getFill());$("#txtHexavalue").val(this.getFill());$("#txtOutline").val(this.getStrokeWidth());$("#txtOutlineClrVal").val(this.getStroke());$("#txtOutlineHexavalue").val(this.getStroke());$("#txtBGClrVal").val(this.getTextBackgroundColor());$("#txtBGHexavalue").val(this.getTextBackgroundColor());a=this.getTextAlign();var b=this.getFontStyle(),c=this.getFontWeight();$(".divAlign i").css({"background-color":"#ffffff",
color:"#000000"});$("#align"+a+" i").css({"background-color":"#424242",color:"#ffffff"});$(".divStyleBold i").css({"background-color":"#ffffff",color:"#000000"});$("#style"+c+" i").css({"background-color":"#424242",color:"#ffffff"});$(".divStyleItalic i").css({"background-color":"#ffffff",color:"#000000"});$("#style"+b+" i").css({"background-color":"#424242",color:"#ffffff"})});k.on("text:changed",function(a){a=k.getActiveObject();$("#txtText").val(a.getText())});k.add(p[a]);k.setActiveObject(p[a]);
k.renderAll()}function G(){$(".wrapLoader").css({display:"block"});$("#cc").layout("panel","east").panel("options").collapsed&&$("#cc").layout("expand","east");$("#hueSlide").val(0);$("#saturSlide").val(0);$("#vibrSlide").val(0);$("#tempSlide").val(0);$("#redSlide").val(0);$("#blueSlide").val(0);$("#greenSlide").val(0);$(".subProperties").hide();$("#color-options").show();$("#cc").layout("panel","east").panel({title:"Color",iconCls:"fa-tint mini-icon"});$("#canvasTextBox").html("");$("#canvasTextBox").show();
var a=$('<img id="dynamicImg">');a.attr("src",$("#isource").attr("src"));a.css({position:"absolute",top:$("#isource").css("top"),left:$("#isource").css("left")});a.appendTo("#canvasTextBox");$("#isource").hide();$("#canvas-box").hide();Caman("#dynamicImg",function(){this.revert(!1);this.render();$(".wrapLoader").css({display:"none"})})}function H(a){var b=parseInt($("#hueSlide").val()),c=parseInt($("#saturSlide").val()),d=parseInt($("#vibrSlide").val()),e=parseInt($("#redSlide").val()),f=parseInt($("#blueSlide").val()),
g=parseInt($("#greenSlide").val()),h=parseInt($("#tempSlide").val());$("#saturVal").html(c);$("#hueVal").html(b);$("#vibrVal").html(d);$("#redVal").html(e);$("#blueVal").html(f);$("#greenVal").html(g);$("#tempVal").html(h);var k=0,l=0,m=0;0<h&&(k=h,l=h/3,m=-h);0>h&&(k=h,l=h/3,m=Math.abs(h)/2);$(".wrapLoader").css({display:"block"});Caman("#dynamicImg",function(){this.revert(!1);this.hue(b);this.saturation(c);this.vibrance(d);this.channels({red:e,green:g,blue:f});this.channels({red:k,green:l,blue:m});
this.render();$(".wrapLoader").css({display:"none"})});0!=$(a).val()?(a=$(a).parent().prev().find("i"),$(a).show()):(a=$(a).parent().prev().find("i"),$(a).hide())}function r(a){var b=document.getElementById("dynamicImg");b.getContext("2d");b=b.toDataURL();$.ajax({type:"POST",url:base_url+"/text_image.php",data:{imagename:imagefile,sessionid:sessionid,canvasData:b,optCount:opt_count},dataType:"json",beforeSend:function(){$(".wrapLoader").css({display:"block"})},success:function(b){$(".clrReset").trigger("click");
$(".exprReset").trigger("click");$(".blurReset").trigger("click");$(".gammaReset").trigger("click");$(".sharpReset").trigger("click");$(".wrapLoader").css({display:"block"});opt_count++;max_count=opt_count;e=!1;$("#ancRedo").addClass("in-active");$("#ancDwn").removeClass("in-active");$("#ancUndo").removeClass("in-active");$("#ancReset").removeClass("in-active");imagefile=b.imagefile;$(".wrapLoader").css({display:"block"});h(imagefile,function(){$(".wrapLoader").css({display:"block"});a()})}})}function I(){$("#cc").layout("panel",
"east").panel("options").collapsed&&$("#cc").layout("expand","east");$("#exprSlide").val(0);$("#brtSlide").val(0);$("#contrSlide").val(0);$("#noiseSlide").val(0);$("#sepiaSlide").val(0);$(".subProperties").hide();$("#exposure-options").show();$("#cc").layout("panel","east").panel({title:"Exposure",iconCls:"icon-exposure"});$("#canvasTextBox").html("");$("#canvasTextBox").show();var a=$('<img id="dynamicImg">');a.attr("src",$("#isource").attr("src"));a.css({position:"absolute",top:$("#isource").css("top"),
left:$("#isource").css("left")});a.appendTo("#canvasTextBox");$("#isource").hide();$("#canvas-box").hide();Caman("#dynamicImg",function(){this.revert(!1);this.render()});$(".wrapLoader").css({display:"none"})}function J(a){var b=parseInt($("#exprSlide").val()),c=parseInt($("#brtSlide").val()),d=parseInt($("#contrSlide").val()),e=parseInt($("#noiseSlide").val()),f=parseInt($("#sepiaSlide").val());$("#exprVal").html(b);$("#brtVal").html(c);$("#contrVal").html(d);$("#noiseVal").html(e);$("#sepiaVal").html(f);
$(".wrapLoader").css({display:"block"});Caman("#dynamicImg",function(){this.revert(!1);this.exposure(b);this.brightness(c);this.contrast(d);this.noise(e);this.sepia(f);this.render();$(".wrapLoader").css({display:"none"})});0!=$(a).val()?(a=$(a).parent().prev().find("i"),$(a).show()):(a=$(a).parent().prev().find("i"),$(a).hide())}function K(){$("#cc").layout("panel","east").panel("options").collapsed&&$("#cc").layout("expand","east");$("#blurSlide").val(0);$(".subProperties").hide();$("#blur-options").show();
$("#cc").layout("panel","east").panel({title:"Blur",iconCls:"fa-google-wallet mini-icon"});$("#canvasTextBox").html("");var a=$('<img id="dynamicImg">');a.attr("src",$("#isource").attr("src"));a.css({position:"absolute",top:$("#isource").css("top"),left:$("#isource").css("left")});a.appendTo("#canvasTextBox");$("#canvasTextBox").show();$("#isource").hide();$("#canvas-box").hide();$(".wrapLoader").css({display:"none"});Caman("#dynamicImg",function(){this.revert(!1);this.render()})}function L(a){var b=
parseInt($("#blurSlide").val());$("#blurVal").html(b);$(".wrapLoader").show();Caman("#dynamicImg",function(){this.revert(!1);this.stackBlur(b);this.render();$(".wrapLoader").hide()});0!=$(a).val()?(a=$(a).parent().prev().find("i"),$(a).show()):(a=$(a).parent().prev().find("i"),$(a).hide())}function M(){$("#cc").layout("panel","east").panel("options").collapsed&&$("#cc").layout("expand","east");$("#gammaSlide").val(1);$(".subProperties").hide();$("#gamma-options").show();$("#cc").layout("panel","east").panel({title:"Gamma",
iconCls:"fa-compass mini-icon"});$("#canvasTextBox").html("");var a=$('<img id="dynamicImg">');a.attr("src",$("#isource").attr("src"));a.css({position:"absolute",top:$("#isource").css("top"),left:$("#isource").css("left")});a.appendTo("#canvasTextBox");$("#canvasTextBox").show();$("#isource").hide();$("#canvas-box").hide();$(".wrapLoader").css({display:"none"});Caman("#dynamicImg",function(){this.revert(!1);this.render()})}function N(a){var b=$("#gammaSlide").val();$("#gammaVal").html(b);$(".wrapLoader").show();
Caman("#dynamicImg",function(){this.revert(!1);this.gamma(b);this.render();$(".wrapLoader").hide()});0!=$(a).val()?(a=$(a).parent().prev().find("i"),$(a).show()):(a=$(a).parent().prev().find("i"),$(a).hide())}function O(){$("#cc").layout("panel","east").panel("options").collapsed&&$("#cc").layout("expand","east");$("#sharpSlide").val(0);$(".subProperties").hide();$("#sharp-options").show();$("#cc").layout("panel","east").panel({title:"Sharpness",iconCls:"fa-eye mini-icon"});$("#canvasTextBox").html("");
$("#canvasTextBox").show();var a=$('<img id="dynamicImg">');a.attr("src",$("#isource").attr("src"));a.css({position:"absolute",top:$("#isource").css("top"),left:$("#isource").css("left")});a.appendTo("#canvasTextBox");$("#isource").hide();$("#canvas-box").hide();$(".wrapLoader").css({display:"none"});Caman("#dynamicImg",function(){this.revert(!1);this.render()})}function P(a){var b=$("#sharpSlide").val();$(".wrapLoader").show();$("#sharpVal").html(b);Caman("#dynamicImg",function(){this.revert(!1);
this.sharpen(b);this.render();$(".wrapLoader").hide()});0!=$(a).val()?(a=$(a).parent().prev().find("i"),$(a).show()):(a=$(a).parent().prev().find("i"),$(a).hide())}function ea(a){var b=f.getActiveObject();null!=b&&b.set({hasControls:!1,hasBorders:!1});f.renderAll();b=document.getElementById("dynamicCanvas");b.getContext("2d");b=b.toDataURL();$.ajax({type:"POST",url:base_url+"/text_image.php",data:{imagename:imagefile,sessionid:sessionid,canvasData:b,optCount:opt_count},dataType:"json",beforeSend:function(){$(".wrapLoader").css({display:"block"})},
success:function(b){opt_count++;max_count=opt_count;e=!1;$("#ancRedo").addClass("in-active");$("#ancDwn").removeClass("in-active");$("#ancUndo").removeClass("in-active");$("#ancReset").removeClass("in-active");$("#lineSlide").slider({value:5});$("#txtPencilClrVal").val("#000000");$("#txtPencilClrHexa").val("#000000");$("#txtShapeOutline").val(2);$("#txtShapeOutlineHexavalue").val("#000000");$("#txtShapeOutlineClrVal").val("#000000");$("#txtFillClrVal").val("#000000");$("#txtFillClrHexa").val("#000000");
imagefile=b.imagefile;$(".wrapLoader").css({display:"block"});h(imagefile,function(){$(".wrapLoader").css({display:"block"});a()})}})}function Q(){$("#cc").layout("panel","east").panel("options").collapsed&&$("#cc").layout("expand","east");$(".subProperties").hide();$("#shapes-options").show();$("#cc").layout("panel","east").panel({title:"Shapes",iconCls:"icon-shapes"});var a=$("#isource").css("top");$("#canvasTextBox").html('<canvas id="dynamicCanvas" ></canvas>');$("#canvasTextBox").show();f=new fabric.Canvas("dynamicCanvas");
$("#canvasTextBox .canvas-container").css({margin:"0 auto",position:"relative",top:a});f.setHeight(n);f.setWidth(m);a=$("#isource").attr("src");fabric.Image.fromURL(a,function(a){ba=a;f.centerObject(a);f.renderAll();a.set({cornerColor:"#969696",hasControls:!1,hasRotatingPoint:!1,hasBorders:!1,selectable:!1});f.add(a);f.renderAll();$("#isource").hide();$("#canvas-box").hide();$(".wrapLoader").css({display:"none"})});f.on("mouse:move",function(a){$("#x_axis").val(parseInt(a.e.offsetX-c.left));$("#y_axis").val(parseInt(a.e.offsetY-
c.top));var b=f.getContext("2d"),d=f.getPointer(a.e);a=parseInt(d.x);d=parseInt(d.y);a=b.getImageData(a,d,1,1).data;b="rgb("+a[0]+" , "+a[1]+" ,"+a[2]+")";a="#"+("000000"+F(a[0],a[1],a[2])).slice(-6);$("#hexaColor").val(a);$("#hexaColorPicker").val(a);$("#txtColor").val(b)})}function ia(a){l[a]=new fabric.Rect({width:200,height:100,left:50,top:50,fill:"",stroke:"#000000",strokeWidth:2});l[a].on("selected",function(a){$("#txtFillClrVal").val(this.getFill());$("#txtFillClrHexa").val(this.getFill());
$("#txtShapeOutline").val(this.getStrokeWidth());$("#txtShapeOutlineClrVal").val(this.getStroke());$("#txtShapeOutlineHexavalue").val(this.getStroke());f.bringForward(this)});f.add(l[a]);f.centerObject(l[a]);l[a].setCoords();f.setActiveObject(l[a]);f.renderAll()}function ja(a){l[a]=new fabric.Rect({width:100,height:100,left:150,top:50,fill:"",stroke:"#000000",strokeWidth:2});l[a].on("selected",function(a){$("#txtFillClrVal").val(this.getFill());$("#txtFillClrHexa").val(this.getFill());$("#txtShapeOutline").val(this.getStrokeWidth());
$("#txtShapeOutlineClrVal").val(this.getStroke());$("#txtShapeOutlineHexavalue").val(this.getStroke());f.bringForward(this)});f.add(l[a]);f.centerObject(l[a]);l[a].setCoords();f.setActiveObject(l[a]);f.renderAll()}function ka(a){l[a]=new fabric.Circle({radius:50,fill:"",stroke:"#000000",strokeWidth:2});l[a].on("selected",function(a){$("#txtFillClrVal").val(this.getFill());$("#txtFillClrHexa").val(this.getFill());$("#txtShapeOutline").val(this.getStrokeWidth());$("#txtShapeOutlineClrVal").val(this.getStroke());
$("#txtShapeOutlineHexavalue").val(this.getStroke());f.bringForward(this)});f.add(l[a]);f.centerObject(l[a]);l[a].setCoords();f.setActiveObject(l[a]);f.renderAll()}function la(a){l[a]=new fabric.Triangle({width:100,height:100,fill:"",stroke:"#000000",strokeWidth:2});l[a].on("selected",function(a){$("#txtFillClrVal").val(this.getFill());$("#txtFillClrHexa").val(this.getFill());$("#txtShapeOutline").val(this.getStrokeWidth());$("#txtShapeOutlineClrVal").val(this.getStroke());$("#txtShapeOutlineHexavalue").val(this.getStroke());
f.bringForward(this)});f.add(l[a]);f.centerObject(l[a]);l[a].setCoords();f.setActiveObject(l[a]);f.renderAll()}function R(){$("#cc").layout("panel","east").panel("options").collapsed&&$("#cc").layout("expand","east");$(".subProperties").hide();$("#draw-options").show();$("#cc").layout("panel","east").panel({title:"Drawing",iconCls:"fa-paint-brush mini-icon"});var a=$("#isource").css("top");$("#canvasTextBox").html('<canvas id="dynamicCanvas" ></canvas>');$("#canvasTextBox").show();f=new fabric.Canvas("dynamicCanvas",
{isDrawingMode:!0});$("#canvasTextBox .canvas-container").css({margin:"0 auto",position:"relative",top:a});f.setHeight(n);f.setWidth(m);a=$("#isource").attr("src");fabric.Image.fromURL(a,function(a){ba=a;f.centerObject(a);f.renderAll();a.set({cornerColor:"#969696",hasControls:!1,hasRotatingPoint:!1,hasBorders:!1,selectable:!1});f.add(a);f.freeDrawingBrush.width=5;f.renderAll();$("#isource").hide();$("#canvas-box").hide();$(".wrapLoader").css({display:"none"})});$("#lineSlide").slider({min:1,max:100,
value:5,onChange:function(a,b){f.freeDrawingBrush.width=parseInt(a,10);f.renderAll();e=!0}});var b=0,d=[];f.on("object:added",function(a){d[b]=a.target;b++});$("#ancDrawUndo").click(function(){1<b&&(f.remove(d[b-1]),b--)});f.on("mouse:move",function(a){$("#x_axis").val(parseInt(a.e.offsetX-c.left));$("#y_axis").val(parseInt(a.e.offsetY-c.top));var b=f.getContext("2d"),d=f.getPointer(a.e);a=parseInt(d.x);d=parseInt(d.y);a=b.getImageData(a,d,1,1).data;b="rgb("+a[0]+" , "+a[1]+" ,"+a[2]+")";a="#"+("000000"+
F(a[0],a[1],a[2])).slice(-6);$("#hexaColor").val(a);$("#hexaColorPicker").val(a);$("#txtColor").val(b)});f.on("object:added",function(a){e=!0})}function F(a,b,d){if(255<a||255<b||255<d)throw"Invalid color component";return(a<<16|b<<8|d).toString(16)}function S(){$("#cc").layout("panel","east").panel("options").collapsed&&$("#cc").layout("expand","east");$("#cc").layout("panel","east").panel({title:"Censor",iconCls:"icon-censor mini-icon"});$("#canvasTextBox").hide();$(".subProperties").hide();$("#censor-options").show();
$("#isource").show();$("#canvas-box").hide();$("#isource").Jcrop({onChange:ma,onSelect:na,onRelease:oa},function(){d=this;100<$("#isource").width()&&100<$("#isource").height()?(d.setSelect([50,50,$("#isource").width()-50,$("#isource").height()-50]),$("#censorWidth").val($("#isource").width()-100),$("#censorHeight").val($("#isource").height()-100)):(d.setSelect([0,0,$("#isource").width(),$("#isource").height()]),$("#censorWidth").val($("#isource").width()),$("#censorHeight").val($("#isource").height()));
if(0<c.top){$(".jcrop-holder").css("margin-top",0);$(".jcrop-holder").css("top",c.top);var a=$(".jcrop-holder").position().left,a=a-4;$(".jcrop-holder").css("left",a)}})}function ma(a){e=!0;$("#xCensor").val(Math.round(a.x));$("#yCensor").val(Math.round(a.y));$("#censorWidth").val(Math.ceil(a.w));$("#censorHeight").val(Math.ceil(a.h))}function na(a){e=!0;$("#xCensor").val(Math.round(a.x));$("#yCensor").val(Math.round(a.y));$("#censorWidth").val(Math.ceil(a.w));$("#censorHeight").val(Math.ceil(a.h))}
function oa(a){e=!1}function T(){$(".wrapLoader").css({display:"block"});$("#cc").layout("panel","east").panel("options").collapsed&&$("#cc").layout("expand","east");$("#canvasTextBox").hide();$(".subProperties").hide();$("#isource").hide();$("#canvas-box").show();$("#frame-options").show();$("#cc").layout("panel","east").panel({title:"Frames",iconCls:"icon-frame mini-icon"});c.set({hasControls:!1,hasRotatingPoint:!1,hasBorders:!1,borderColor:"#aaa",cornerColor:"#aaa"});c.setControlsVisibility({mt:!1,
mb:!1,ml:!1,mr:!1,tr:!1,tl:!1,br:!1,bl:!1});g.renderAll();$(".wrapLoader").css({display:"none"})}var g=new fabric.Canvas("csource");fabric.Object.prototype.transparentCorners=!1;var c,m,n,e=!1,ca="",t="",u=new Date,d=null;$("#ancDwn").removeClass("in-active");var h=function(a,b){$("#canvasTextBox").hide();g.clear();e=!1;$("#isource").hide();u=new Date;fabric.Image.fromURL(assets_url+"/uploads/"+sessionid+"/"+a+"?timestamp="+u.getTime(),function(e){c=e;$.ajax({type:"POST",url:base_url+"/get_image_info.php",
data:{imagename:a,sessionid:sessionid},dataType:"json",beforeSend:function(){$(".wrapLoader").css({display:"block"})},success:function(a){$(".imgsize b").html(a+" KB");$(".wrapLoader").css({display:"none"})}});g.setHeight($("#center").height());g.setWidth($("#center").width());n=c.getHeight();m=c.getWidth();$("#isource").width(m);$("#isource").height(n);g.centerObject(e);e.setCoords();g.renderAll();u=new Date;$("#isource").attr("src",assets_url+"/uploads/"+sessionid+"/"+a+"?timestamp="+u.getTime());
$("#histogram").attr("src",assets_url+"/uploads/"+sessionid+"/histogram.png?timestamp="+u.getTime());$("#isource").css("position","absolute");$("#isource").css("top",c.top);$("#isource").css("left",c.left);0>=c.top&&$("#isource").css("top",0);0>=c.left&&$("#isource").css("left",0);e.set({hasControls:!1,hasRotatingPoint:!1,hasBorders:!1,borderColor:"#aaa",cornerColor:"#aaa"});g.add(e);g.setActiveObject(e);g.renderAll();$("#canvas-box").show();$("#isource").hide();$("#zoomSlide").slider({min:10,max:2E3,
value:m,onSlideStart:function(){$("#hdrTitle").html("Online Image Editor");$("#canvasTextBox").hide();$("#canvas-box").show();$(".subProperties").hide();null!=d&&(d.destroy(),d=null);$("#isource").hide();$(".sub-default-lft").css("background","#EEEEEE");$(".sub-default-lft").css("color","#424242");$("#cc").layout("panel","east").panel({title:"Help",iconCls:"icon-help mini-icon"});$("#help-options").show()},onChange:function(a,b){c.height=Math.ceil(n/m*a);c.width=a;c.set({hasControls:!1,hasRotatingPoint:!1,
hasBorders:!1,selectable:!0});c.setAngle(0);g.centerObject(c);c.setCoords();g.setActiveObject(c);g.renderAll()}});b()})};$(".wrapLoader").css({display:"block"});$("#cc").layout("panel","east").panel({onExpand:function(){g.setWidth($("#center").width()-240);g.centerObject(c);c.setCoords();g.renderAll();$("#isource").css("top",c.top);$("#isource").css("left",c.left);0>=c.top&&$("#isource").css("top",0);0>=c.left&&$("#isource").css("left",0)},onCollapse:function(){g.setWidth($("#center").width());g.centerObject(c);
c.setCoords();g.renderAll();$("#isource").css("top",c.top);$("#isource").css("left",c.left);0>=c.top&&$("#isource").css("top",0);0>=c.left&&$("#isource").css("left",0)}});$("#cc").layout("panel","west").panel({onExpand:function(){g.setWidth($("#center").width()-240);g.centerObject(c);c.setCoords();g.renderAll();$("#isource").css("top",c.top);$("#isource").css("left",c.left);0>=c.top&&$("#isource").css("top",0);0>=c.left&&$("#isource").css("left",0)},onCollapse:function(){g.setWidth($("#center").width());
g.centerObject(c);c.setCoords();g.renderAll();$("#isource").css("top",c.top);$("#isource").css("left",c.left);0>=c.top&&$("#isource").css("top",0);0>=c.left&&$("#isource").css("left",0)}});$(".sampleImg").click(function(a){a={imagename:$(this).attr("alt"),sessionid:sessionid};$.ajax({type:"POST",url:base_url+"/copy_sample_image.php",data:a,dataType:"json",beforeSend:function(){$(".wrapLoader").css({display:"block"})},success:function(a){null!=d&&(d.destroy(),d=null);max_count=opt_count=0;initimage=
imagefile=a.imagefile;$("#newUploadmenu").hide();$("#cc").layout("collapse","east");$(".sub-default-lft").css("background","#EEEEEE");$(".sub-default-lft").css("color","#424242");$(".subProperties").hide();$("#help-options").show();h(imagefile,function(){})}})});$("#ancUpload").click(function(){$("#fileImg").trigger("click");$("#cc").layout("collapse","east")});$("#ancUrlUpload").click(function(){if(""==$("#txtNewUrl").val())return alert("Please Enter URL"),$("#txtNewUrl").focus(),!1;var a={imagename:$("#txtNewUrl").val(),
sessionid:sessionid};$.ajax({type:"POST",url:base_url+"/copy_url_image.php",data:a,dataType:"json",beforeSend:function(){$(".wrapLoader").css({display:"block"})},success:function(a){null!=d&&(d.destroy(),d=null);max_count=opt_count=0;initimage=imagefile=a.imagefile;$("#newUploadmenu").hide();$("#cc").layout("collapse","east");$(".sub-default-lft").css("background","#EEEEEE");$(".sub-default-lft").css("color","#424242");$(".subProperties").hide();$("#help-options").show();h(imagefile,function(){})}})});
$("#fileImg").change(function(a){a=$("#fileImg").val();if(0>=a.length)return alert("Please select a file from local drive."),$("#fileImg").focus(),!1;a=a.split(".");a=a.reverse();if(0>$.inArray(a[0].toLowerCase(),["jpeg","jpg","png","gif","bmp"]))return alert("Please select jpeg/jpg/png/gif format files only."),$("#fileImg").focus(),!1;a=new FormData;a.append("imagename",$("#fileImg").prop("files")[0]);a.append("sessionid",sessionid);$.ajax({type:"POST",url:base_url+"/upload_new_image.php",data:a,
cache:!1,processData:!1,contentType:!1,dataType:"json",beforeSend:function(){$(".wrapLoader").css({display:"block"})},success:function(a){null!=d&&(d.destroy(),d=null);max_count=opt_count=0;initimage=imagefile=a.imagefile;$("#newUploadmenu").hide();$("#cc").layout("collapse","east");$(".sub-default-lft").css("background","#EEEEEE");$(".sub-default-lft").css("color","#424242");$(".subProperties").hide();$("#help-options").show();$("#fileImg").val("");h(imagefile,function(){})}});$("#newUploadmenu").hide()});
$(document).on("click","#upLoad",function(a){a.stopPropagation();$("#newUploadmenu").show();$("#imgDownloadDiv").hide()});$(document).on("click","#ancDwn",function(a){a.stopPropagation();$("#imgDownloadDiv").show();$("#newUploadmenu").hide()});$(document).on("click","#newUploadmenu",function(a){a.stopPropagation();$("#newUploadmenu").show()});$(document).on("click","#imgDownloadDiv",function(a){a.stopPropagation();$("#imgDownloadDiv").show()});$(document).on("click",function(a){a=$("#newUploadmenu");
a.is(":visible")&&a.hide()});$(document).on("click",function(a){a=$("#imgDownloadDiv");a.is(":visible")&&a.hide()});$("#upLoad").click(function(){$("#newUploadmenu").toggle()});$("#ancDwn").click(function(){$("#imgDownloadDiv").toggle()});$('#resize-m').trigger('click');$("#resize-m").click(function(){$("#hdrTitle").html("Resize Photo Online");$(".wrapLoader").css({display:"block"});null!=d&&(d.destroy(),d=null);$(".sub-default-lft").css("background","#EEEEEE");$(".sub-default-lft").css("color","#424242");$(this).find("div").css("background",
"#044218");$(this).find("div").css("color","#fff");(function(){e?h(imagefile,function(){z()}):(z(),$(".wrapLoader").css({display:"none"}))})()});$("#resizeApply").click(function(){e&&pa(function(){z()})});$("#resizePct").change(function(){e=!0;var a=$(this).val(),b=Math.floor(n*a/100),a=Math.floor(m*a/100);c.height=b;c.width=a;g.centerObject(c);c.setCoords();g.setActiveObject(c);g.renderAll();$("#resizeWidth").val(a);$("#resizeHeight").val(b);$("#resizeAspectRatio option:eq(0)").prop("selected",!0);
$("#rangeSlide").slider({value:a})});$("#resizeWidth").keyup(function(){var a=$("#resizeAspectRatio").val(),b=Math.floor($(this).val()/a),d=parseInt($("#resizeWidth").val());isNaN(d)||isNaN(b)||(-1==a?0<=$(this).val()&&(b=parseInt($("#resizeHeight").val())):1.7==a?b=Math.round($(this).val()/(16/9)):1.3==a&&(b=Math.round($(this).val()/(4/3))),c.height=b,c.width=d,$("#resizeHeight").val(b),$("#resizePct option:eq(0)").prop("selected",!0),$("#rangeSlide").slider({value:d}),e=!0,g.centerObject(c),c.setCoords(),
g.setActiveObject(c),g.renderAll())});$("#resizeHeight").keyup(function(){var a=$("#resizeAspectRatio").val(),b=Math.floor($(this).val()*a),d=parseInt($("#resizeHeight").val());isNaN(b)||isNaN(d)||(-1==a?0<=$(this).val()&&(b=parseInt($("#resizeWidth").val())):1.7==a?b=Math.round($(this).val()*(16/9)):1.3==a&&(b=Math.round($(this).val()*(4/3))),c.height=d,c.width=b,$("#resizeWidth").val(b),$("#resizePct option:eq(0)").prop("selected",!0),$("#rangeSlide").slider({value:b}),e=!0,g.centerObject(c),c.setCoords(),
g.setActiveObject(c),g.renderAll())});g.on("object:scaling",function(a){e=!0;a=Math.ceil(c.getHeight());var b=Math.ceil(c.getWidth());$("#rangeSlide").slider({value:b});$("#resizePct option:eq(0)").prop("selected",!0);$("#resizeWidth").val(b);$("#resizeHeight").val(a)});var pa=function(a){var b={imagename:imagefile,sessionid:sessionid,width:$("#resizeWidth").val(),height:$("#resizeHeight").val(),optCount:opt_count};$.ajax({type:"POST",url:base_url+"/resize_image.php",data:b,dataType:"json",beforeSend:function(){$(".wrapLoader").css({display:"block"})},
success:function(b){opt_count++;max_count=opt_count;e=!1;$("#ancRedo").addClass("in-active");$("#ancDwn").removeClass("in-active");$("#ancUndo").removeClass("in-active");$("#ancReset").removeClass("in-active");$("#resizePct option:eq(0)").prop("selected",!0);$("#resizeAspectRatio option:eq(0)").prop("selected",!0);imagefile=b.imagefile;h(imagefile,function(){a()})}})};$("#ancUndo").click(function(){opt_count--;$.ajax({type:"POST",url:base_url+"/doredo_opt.php",data:{imagename:imagefile,initimage:initimage,
sessionid:sessionid,optCount:opt_count},dataType:"json",beforeSend:function(){$(".wrapLoader").css({display:"block"})},success:function(a){0>=opt_count&&(opt_count=0,$("#ancUndo").addClass("in-active"));0<max_count-opt_count&&$("#ancRedo").removeClass("in-active");imagefile=a.imagefile;h(imagefile,function(){$(".subProperties").hide();$("#help-options").show()});null!=d&&(d.destroy(),d=null);$("#cc").layout("collapse","east");$("#cc").layout("panel","east").panel({title:"Help",iconCls:"icon-help"});
$(".sub-default-lft").css("background","#EEEEEE");$(".sub-default-lft").css("color","#424242")}})});$("#ancRedo").click(function(){opt_count++;$.ajax({type:"POST",url:base_url+"/doredo_opt.php",data:{imagename:imagefile,initimage:initimage,sessionid:sessionid,optCount:opt_count},dataType:"json",beforeSend:function(){$(".wrapLoader").css({display:"block"})},success:function(a){0<opt_count&&$("#ancUndo").removeClass("in-active");0==max_count-opt_count&&$("#ancRedo").addClass("in-active");imagefile=
a.imagefile;h(imagefile,function(){$(".subProperties").hide();$("#help-options").show()});null!=d&&(d.destroy(),d=null);$("#cc").layout("collapse","east");$("#cc").layout("panel","east").panel({title:"Help",iconCls:"icon-help"});$(".sub-default-lft").css("background","#EEEEEE");$(".sub-default-lft").css("color","#424242")}})});$("#ancReset").click(function(){1==confirm("Do you really want to reset all the changes!")&&($(".wrapLoader").css({display:"block"}),max_count=opt_count=0,$("#ancRedo").addClass("in-active"),
$("#ancDwn").addClass("in-active"),$("#ancUndo").addClass("in-active"),$("#ancReset").addClass("in-active"),$("#ancReset").addClass("in-active"),$(".subProperties").hide(),$("#help-options").show(),$("#cc").layout("collapse","east"),$("#cc").layout("panel","east").panel({title:"Help",iconCls:"icon-help"}),$(".sub-default-lft").css("background","#EEEEEE"),$(".sub-default-lft").css("color","#424242"),null!=d&&(d.destroy(),d=null),imagefile=initimage,h(initimage,function(){}))});$(".ancDownload").click(function(a){var b=
$(this).attr("data-img-type");(function(){$.ajax({type:"POST",url:base_url+"/download_image.php",data:{imagename:imagefile,sessionid:sessionid,type:b,optCount:opt_count},dataType:"json",beforeSend:function(){$(".wrapLoader").css({display:"block"})},success:function(a){a=$("<a>").attr("href",a.imageurl).attr("download",a.imagefile).appendTo("body");a[0].click();a.remove();$(".wrapLoader").css({display:"none"})}})})()});$(".btnCancel").click(function(){$(".wrapLoader").css({display:"block"});h(imagefile,
function(){$(".subProperties").hide();null!=d&&(d.destroy(),d=null);$("#canvasTextBox").hide();$("#isource").hide();$(".sub-default-lft").css("background","#EEEEEE");$(".sub-default-lft").css("color","#424242");$("#cc").layout("panel","east").panel({title:"Help",iconCls:"icon-help mini-icon"});$("#help-options").show()})});$("#rotate-m").click(function(){$("#hdrTitle").html("Rotate Photo Online");$(".wrapLoader").css({display:"block"});null!=d&&(d.destroy(),d=null);$(".sub-default-lft").css("background",
"#EEEEEE");$(".sub-default-lft").css("color","#424242");$(this).find("div").css("background","#044218");$(this).find("div").css("color","#fff");(function(){e?h(imagefile,function(){A()}):(A(),$(".wrapLoader").css({display:"none"}))})()});$("#rotateApply").click(function(){e&&qa(function(){A()})});var v=!1,w=!1;$("#flipHor").click(function(){e=!0;v=v?!1:!0;c.set("flipX",v);g.renderAll()});$("#flipVer").click(function(){e=!0;w=w?!1:!0;c.set("flipY",w);g.renderAll()});$(".clsDegree").click(function(){var a=
$(this).attr("data-degree");e=!0;$("#rotateSlide").slider({value:a});c.setAngle(a);g.renderAll()});g.on("object:rotating",function(a){a=Math.ceil(c.getAngle());e=!0;$("#rotateSlide").slider({value:a});g.renderAll()});$("#rotateSlide").slider({min:0,max:360,value:0,onChange:function(a,b){e=!0;c.setAngle(a);g.setActiveObject(c);g.renderAll()}});var qa=function(a){var b={imagename:imagefile,sessionid:sessionid,flipV:w,flipH:v,angle:$("#rotateSlide").val(),optCount:opt_count};$.ajax({type:"POST",url:base_url+
"/rotate_image.php",data:b,dataType:"json",beforeSend:function(){$(".wrapLoader").css({display:"block"})},success:function(b){opt_count++;max_count=opt_count;v=w=e=!1;$("#rotateSlide").slider({value:0});$("#ancRedo").addClass("in-active");$("#ancDwn").removeClass("in-active");$("#ancUndo").removeClass("in-active");$("#ancReset").removeClass("in-active");imagefile=b.imagefile;$(".imgsize b").html(b.imagesize+" KB");h(imagefile,function(){a()})}})};$("#imgeffects-m").click(function(){$("#hdrTitle").html("Online Photo Effects");
$(".wrapLoader").css({display:"block"});null!=d&&(d.destroy(),d=null);$(".sub-default-lft").css("background","#EEEEEE");$(".sub-default-lft").css("color","#424242");$(this).find("div").css("background","#044218");$(this).find("div").css("color","#fff");(function(){e?h(imagefile,function(){B()}):(B(),$(".wrapLoader").css({display:"none"}))})()});$("#effectApply").click(function(){e&&ra(function(){B()})});var ra=function(a){$.ajax({type:"POST",url:base_url+"/effect_image.php",data:{imagename:imagefile,
sessionid:sessionid,effectid:ca,optCount:opt_count},dataType:"json",beforeSend:function(){$(".wrapLoader").css({display:"block"})},success:function(b){opt_count++;max_count=opt_count;e=!1;$("#ancRedo").addClass("in-active");$("#ancDwn").removeClass("in-active");$("#ancUndo").removeClass("in-active");$("#ancReset").removeClass("in-active");imagefile=b.imagefile;h(imagefile,function(){a()})}})};$(".img-effect").click(function(){ca=$(this).attr("data-effect");$.ajax({type:"POST",url:base_url+"/effect_image.php",
data:{imagename:imagefile,sessionid:sessionid,effectid:ca,optCount:opt_count},dataType:"json",beforeSend:function(){$(".wrapLoader").css({display:"block"})},success:function(a){e=!0;$("#ancRedo").addClass("in-active");$("#ancDwn").removeClass("in-active");$("#ancUndo").removeClass("in-active");$("#ancReset").removeClass("in-active");h(a.imagefile,function(){e=!0})}})});$("#crop-m").click(function(){$("#hdrTitle").html("Crop Image Online");$(".wrapLoader").css({display:"block"});$(".sub-default-lft").css("background",
"#EEEEEE");$(".sub-default-lft").css("color","#424242");$(this).find("div").css("background","#044218");$(this).find("div").css("color","#fff");(function(){e?h(imagefile,function(){C()}):(C(),$(".wrapLoader").css({display:"none"}))})()});$("#cropApply").click(function(){e&&sa(function(){C()})});$("#cropSlide").slider({min:0,max:100,value:0,onChange:function(a,b){$("#cropAspectRatio option:eq(0)").prop("selected",!0);var c=Math.ceil(m*a/100),e=Math.ceil(n*a/100);d.setSelect([0,0,c,e]);$("#cropWidth").val(c);
$("#cropHeight").val(e)}});$("#cropPct").change(function(){$("#cropAspectRatio option:eq(0)").prop("selected",!0);var a=$(this).val(),b=$("#isource").width(),c=$("#isource").height(),b=Math.ceil(b*a/100),c=Math.ceil(c*a/100);d.setSelect([0,0,b,c]);$("#cropWidth").val(b);$("#cropHeight").val(c);$("#cropSlide").slider({value:a})});$("#cropAspectRatio").change(function(){$("#cropPct option:eq(0)").prop("selected",!0);var a=$("#cropPct").val(),b=$("#isource").width(),c=$("#isource").height(),e=b,f=c;
""!=a&&(e=Math.round(b*a/100),f=Math.round(c*a/100));0!=$(this).val()&&(f=Math.ceil(b/$(this).val()));100<$("#isource").width()&&100<$("#isource").height()?(d.setSelect([50,50,e-50,f-50]),$("#cropWidth").val(e-100),$("#cropHeight").val(f-100)):(d.setSelect([0,0,e,f]),$("#cropWidth").val(e),$("#cropHeight").val(f))});$("#cropWidth").keyup(function(){$("#cropAspectRatio option:eq(0)").prop("selected",!0);$("#cropPct option:eq(0)").prop("selected",!0);var a=Math.ceil($(this).val());d.setSelect([0,0,
a,$("#cropHeight").val()])});$("#cropHeight").keyup(function(){$("#cropAspectRatio option:eq(0)").prop("selected",!0);$("#cropPct option:eq(0)").prop("selected",!0);var a=Math.ceil($(this).val());d.setSelect([0,0,$("#cropWidth").val(),a])});var sa=function(a){var b={imagename:imagefile,sessionid:sessionid,width:$("#cropWidth").val(),height:$("#cropHeight").val(),x:$("#x1").val(),y:$("#y1").val(),optCount:opt_count};$.ajax({type:"POST",url:base_url+"/crop_image.php",data:b,dataType:"json",beforeSend:function(){$(".wrapLoader").css({display:"block"})},
success:function(b){opt_count++;max_count=opt_count;e=!1;$("#ancRedo").addClass("in-active");$("#ancDwn").removeClass("in-active");$("#ancUndo").removeClass("in-active");$("#ancReset").removeClass("in-active");imagefile=b.imagefile;$(".imgsize b").html(b.imagesize+" KB");d.destroy();$("#cropAspectRatio option:eq(0)").prop("selected",!0);$("#cropPct option:eq(0)").prop("selected",!0);$("#cropSlide").slider({value:0});h(imagefile,function(){a()})}})},k,U,E=1,p=[],V=[],W=[],X=[],Z=[],Y=[],aa=[];$("#textApply").click(function(){k.getActiveObject().set({hasControls:!1,
hasBorders:!1});k.renderAll();$(".wrapLoader").css({display:"block"});var a=k.toDataURL();$.ajax({type:"POST",url:base_url+"/text_image.php",data:{imagename:imagefile,sessionid:sessionid,canvasData:a,optCount:opt_count},dataType:"json",beforeSend:function(){$(".wrapLoader").css({display:"block"})},success:function(a){opt_count++;max_count=opt_count;e=!1;$("#ancRedo").addClass("in-active");$("#ancDwn").removeClass("in-active");$("#ancUndo").removeClass("in-active");$("#ancReset").removeClass("in-active");
imagefile=a.imagefile;E=1;p.length=0;V.length=0;W.length=0;X.length=0;Z.length=0;Y.length=0;aa.length=0;$(".divStyleBold i, .divStyleItalic i").css({"background-color":"#ffffff",color:"#000000"});$(".divAlign i").css({"background-color":"#ffffff",color:"#000000"});$("#alignleft i").css({"background-color":"#424242",color:"#ffffff"});$("#txtStyle").val("Times New Roman");$("#txtText").val("Sample Text");$("#txtTextSize").val(20);$("#txtClrVal").val("#ff0000");$("#txtHexavalue").val("#ff0000");$("#txtOutline").val(1);
$("#txtOutlineClrVal").val("#000000");$("#txtOutlineHexavalue").val("#000000");$("#txtBGClrVal").val("#000000");$("#txtBGHexavalue").val("#000000");h(imagefile,function(){$("#canvasTextBox").hide();D()})}})});$("#text-m").click(function(){$("#hdrTitle").html("Add Text to Photo Online");$(".wrapLoader").css({display:"block"});null!=d&&(d.destroy(),d=null);$(".wrapLoader").css({display:"block"});$("#canvasTextBox").hide();$(".sub-default-lft").css("background","#EEEEEE");$(".sub-default-lft").css("color",
"#424242");$(this).find("div").css("background","#044218");$(this).find("div").css("color","#fff");(function(){e?h(imagefile,function(){D()}):(D(),$(".wrapLoader").css({display:"none"}))})()});$("#btnNewText").click(function(){da(E)});$("#btnRemoveText").click(function(){var a=k.getActiveObject();k.remove(a);$(".divStyleBold i, .divStyleItalic i").css({"background-color":"#ffffff",color:"#000000"});$(".divAlign i").css({"background-color":"#ffffff",color:"#000000"});$("#alignleft i").css({"background-color":"#424242",
color:"#ffffff"});$("#txtStyle").val("Times New Roman");$("#txtText").val("Sample Text");$("#txtTextSize").val(20);$("#txtClrVal").val("#ff0000");$("#txtHexavalue").val("#ff0000");$("#txtOutline").val(1);$("#txtOutlineClrVal").val("#000000");$("#txtOutlineHexavalue").val("#000000");$("#txtBGClrVal").val("#000000");$("#txtBGHexavalue").val("#000000")});$("#txtStyle").change(function(){k.getActiveObject().set({fontFamily:$(this).val()});k.renderAll()});$(".divAlign").click(function(){$(".divAlign i").css({"background-color":"#ffffff",
color:"#000000"});$(this).find("i").css({"background-color":"#424242",color:"#ffffff"});var a=k.getActiveObject(),b=$(this).attr("data-opt");a.set({textAlign:b});k.renderAll()});var x=0,y=0;$(".divStyleBold").click(function(){var a=k.getActiveObject();x?(x=0,1==y?a.set({fontStyle:"italic",fontWeight:""}):a.set({fontStyle:"normal",fontWeight:""}),$(".divStyleBold i").css({"background-color":"#ffffff",color:"#000000"})):(x=1,1==y?a.set({fontStyle:"italic",fontWeight:"bold"}):a.set({fontStyle:"normal",
fontWeight:"bold"}),$(".divStyleBold i").css({"background-color":"#424242",color:"#ffffff"}));k.renderAll()});$(".divStyleItalic").click(function(){var a=k.getActiveObject();1==y?(y=0,1==x?a.set({fontStyle:"",fontWeight:"bold"}):a.set({fontStyle:"",fontWeight:"normal"}),$(".divStyleItalic i").css({"background-color":"#ffffff",color:"#000000"})):(y=1,1==x?a.set({fontStyle:"italic",fontWeight:"bold"}):a.set({fontStyle:"italic",fontWeight:"normal"}),$(".divStyleItalic i").css({"background-color":"#424242",
color:"#ffffff"}));k.renderAll()});$("#txtText").keyup(function(){k.getActiveObject().setText($(this).val());k.renderAll()});$("#txtTextSize").keyup(function(){k.getActiveObject().setFontSize($(this).val());k.renderAll()});$("#txtHexavalue").keyup(function(){$("#txtClrVal").val($(this).val());k.getActiveObject().setFill($(this).val());k.renderAll()});$("#txtClrVal").change(function(){$("#txtHexavalue").val($(this).val());k.getActiveObject().setFill($(this).val());k.renderAll()});$("#txtBGHexavalue").keyup(function(){$("#txtBGClrVal").val($(this).val());
k.getActiveObject().setTextBackgroundColor($(this).val());k.renderAll()});$("#txtBGClrVal").change(function(){$("#txtBGHexavalue").val($(this).val());k.getActiveObject().setTextBackgroundColor($(this).val());k.renderAll()});$("#txtOutlineHexavalue").keyup(function(){$("#txtOutlineClrVal").val($(this).val());var a=k.getActiveObject(),b=$("#txtOutline").val();a.set({stroke:$(this).val(),strokeWidth:b});k.renderAll()});$("#txtOutlineClrVal").change(function(){$("#txtOutlineHexavalue").val($(this).val());
var a=k.getActiveObject(),b=$("#txtOutline").val();a.set({stroke:$(this).val(),strokeWidth:b});k.renderAll()});$("#txtOutline").keyup(function(){var a=k.getActiveObject(),b=$("#txtOutlineHexavalue").val();a.set({strokeWidth:$(this).val(),stroke:b});k.renderAll()});$("#color-m").click(function(){$("#hdrTitle").html("Adjust Photo Color Online");null!=d&&(d.destroy(),d=null);$(".wrapLoader").css({display:"block"});$(".sub-default-lft").css("background","#EEEEEE");$(".sub-default-lft").css("color","#424242");
$(this).find("div").css("background","#044218");$(this).find("div").css("color","#fff");$("#canvasTextBox").hide();(function(){e?h(imagefile,function(){G()}):(G(),$(".wrapLoader").css({display:"none"}))})()});$("#colorApply").click(function(){e&&ta(function(){G()})});$("#color-options input[type=range]").change(function(){if(0==$("#dynamicImg").length){var a=$('<img id="dynamicImg">');a.attr("src",$("#isource").attr("src"));a.css({position:"absolute",top:$("#isource").css("top"),left:$("#isource").css("left")});
a.appendTo("#canvasTextBox");$("#canvasTextBox").show();$("#isource").hide()}H(this);e=!0});$(".clrReset").click(function(){$(this).hide();var a=$(this).parent().next().find("input");$(a).val(0);$(this).next().html(0);H(a)});$(".clrMinus").click(function(){var a=$(this).next(),b=parseInt($(a).val())-1;$(a).val(b);H(a)});$(".clrPlus").click(function(){var a=$(this).prev(),b=parseInt($(a).val())+1;$(a).val(b);H(a)});var ta=function(a){$(".wrapLoader").css({display:"block"});r(a)};$("#exposure-m").click(function(){$("#hdrTitle").html("Adjust Photo Exposure Online");
$(".wrapLoader").css({display:"block"});null!=d&&(d.destroy(),d=null);$(".wrapLoader").css({display:"block"});$(".sub-default-lft").css("background","#EEEEEE");$(".sub-default-lft").css("color","#424242");$(this).find("div").css("background","#044218");$(this).find("div").css("color","#fff");(function(){e?h(imagefile,function(){I()}):(I(),$(".wrapLoader").css({display:"none"}))})()});var ua=function(a){$(".wrapLoader").css({display:"block"});r(a)};$("#exposureApply").click(function(){$(".wrapLoader").css({display:"block"});
e&&ua(function(){I()})});$("#exposure-options input[type=range]").change(function(){if(0==$("#dynamicImg").length){var a=$('<img id="dynamicImg">');a.attr("src",$("#isource").attr("src"));a.css({position:"absolute",top:$("#isource").css("top"),left:$("#isource").css("left")});a.appendTo("#canvasTextBox");$("#canvasTextBox").show();$("#isource").hide()}J(this);e=!0});$(".exprReset").click(function(){$(this).hide();var a=$(this).parent().next().find("input");$(a).val(0);$(this).next().html(0);J(a)});
$(".exprMinus").click(function(){var a=$(this).next(),b=parseInt($(a).val())-1;$(a).val(b);J(a)});$(".exprPlus").click(function(){var a=$(this).prev(),b=parseInt($(a).val())+1;$(a).val(b);J(a)});$("#blur-m").click(function(){$("#hdrTitle").html("Blur Photo Online");$(".wrapLoader").css({display:"block"});null!=d&&(d.destroy(),d=null);$(".wrapLoader").css({display:"block"});$(".sub-default-lft").css("background","#EEEEEE");$(".sub-default-lft").css("color","#424242");$(this).find("div").css("background",
"#044218");$(this).find("div").css("color","#fff");(function(){e?h(imagefile,function(){K()}):(K(),$(".wrapLoader").css({display:"none"}))})()});$("#blurApply").click(function(){e&&r(function(){K()})});$("#blur-options input[type=range]").change(function(){if(0==$("#dynamicImg").length){var a=$('<img id="dynamicImg">');a.attr("src",$("#isource").attr("src"));a.css({position:"absolute",top:$("#isource").css("top"),left:$("#isource").css("left")});a.appendTo("#canvasTextBox");$("#canvasTextBox").show();
$("#isource").hide()}L(this);e=!0});$(".blurReset").click(function(){$(this).hide();var a=$(this).parent().next().find("input");$(a).val(0);$(this).next().html(0);L(a)});$(".blurMinus").click(function(){var a=$(this).next(),b=parseInt($(a).val())-1;$(a).val(b);L(a)});$(".blurPlus").click(function(){var a=$(this).prev(),b=parseInt($(a).val())+1;$(a).val(b);L(a)});$("#gamma-m").click(function(){$("#hdrTitle").html("Adjust Photo Gamma Online");$(".wrapLoader").css({display:"block"});null!=d&&(d.destroy(),
d=null);$(".wrapLoader").css({display:"block"});$(".sub-default-lft").css("background","#EEEEEE");$(".sub-default-lft").css("color","#424242");$(this).find("div").css("background","#044218");$(this).find("div").css("color","#fff");(function(){e?h(imagefile,function(){M();$("#isource").hide()}):(M(),$("#isource").hide(),$(".wrapLoader").css({display:"none"}))})()});$("#gammaApply").click(function(){e&&r(function(){M()})});$("#gamma-options input[type=range]").change(function(){if(0==$("#dynamicImg").length){var a=
$('<img id="dynamicImg">');a.attr("src",$("#isource").attr("src"));a.css({position:"absolute",top:$("#isource").css("top"),left:$("#isource").css("left")});a.appendTo("#canvasTextBox");$("#canvasTextBox").show();$("#isource").hide()}N(this);e=!0});$(".gammaReset").click(function(){$(this).hide();var a=$(this).parent().next().find("input");$(a).val(0);$(this).next().html(0);N(a)});$(".gammaMinus").click(function(){var a=$(this).next(),b=parseFloat($(a).val())-.1;$(a).val(b);N(a)});$(".gammaPlus").click(function(){var a=
$(this).prev(),b=parseFloat($(a).val())+.1;$(a).val(b);N(a)});$("#sharp-m").click(function(){$("#hdrTitle").html("Sharpen Photo Online");$(".wrapLoader").css({display:"block"});null!=d&&(d.destroy(),d=null);$(".wrapLoader").css({display:"block"});$(".sub-default-lft").css("background","#EEEEEE");$(".sub-default-lft").css("color","#424242");$(this).find("div").css("background","#044218");$(this).find("div").css("color","#fff");(function(){e?h(imagefile,function(){O()}):(O(),$(".wrapLoader").css({display:"none"}))})()});
$("#sharpApply").click(function(){e&&r(function(){O()})});$("#sharp-options input[type=range]").change(function(){if(0==$("#dynamicImg").length){var a=$('<img id="dynamicImg">');a.attr("src",$("#isource").attr("src"));a.css({position:"absolute",top:$("#isource").css("top"),left:$("#isource").css("left")});a.appendTo("#canvasTextBox");$("#canvasTextBox").show();$("#isource").hide()}P(this);e=!0});$(".sharpReset").click(function(){$(this).hide();var a=$(this).parent().next().find("input");$(a).val(0);
$(this).next().html(0);P(a)});$(".sharpMinus").click(function(){var a=$(this).next(),b=parseInt($(a).val())-1;$(a).val(b);P(a)});$(".sharpPlus").click(function(){var a=$(this).prev(),b=parseInt($(a).val())+1;$(a).val(b);P(a)});var f,ba,l=[],q=1;$("#shapes-m").click(function(){$("#hdrTitle").html("Add Shapes to Photo Online");$(".wrapLoader").css({display:"block"});null!=d&&(d.destroy(),d=null);$(".wrapLoader").css({display:"block"});$("#canvasTextBox").hide();$(".sub-default-lft").css("background",
"#EEEEEE");$(".sub-default-lft").css("color","#424242");$(this).find("div").css("background","#044218");$(this).find("div").css("color","#fff");(function(){e?h(imagefile,function(){Q()}):(Q(),$(".wrapLoader").css({display:"none"}))})()});$("#shapeApply").click(function(){e&&ea(function(){Q()})});$("#shapeRect").click(function(){ia(q);e=!0;q++});$("#shapeSquare").click(function(){ja(q);e=!0;q++});$("#shapeCircle").click(function(){ka(q);e=!0;q++});$("#shapeTriangle").click(function(){la(q);e=!0;q++});
$("#btnRemoveShape").click(function(){var a=f.getActiveObject();f.remove(a);f.renderAll();$("#txtShapeOutline").val(2);$("#txtShapeOutlineHexavalue").val("#000000");$("#txtShapeOutlineClrVal").val("#000000");$("#txtFillClrVal").val("#000000");$("#txtFillClrHexa").val("#000000")});$("#txtFillClrHexa").keyup(function(){$("#txtFillClrVal").val($(this).val());f.getActiveObject().setFill($(this).val());f.renderAll()});$("#txtFillClrVal").change(function(){$("#txtFillClrHexa").val($(this).val());f.getActiveObject().setFill($(this).val());
f.renderAll()});$("#txtShapeOutline").keyup(function(){f.getActiveObject().set({strokeWidth:parseInt($(this).val())});f.renderAll()});$("#txtShapeOutlineHexavalue").keyup(function(){$("#txtShapeOutlineClrVal").val($(this).val());f.getActiveObject().setStroke($(this).val());f.renderAll()});$("#txtShapeOutlineClrVal").change(function(){$("#txtShapeOutlineHexavalue").val($(this).val());f.getActiveObject().setStroke($(this).val());f.renderAll()});$(".clrDynamicCanvas").click(function(){f.clear();f.renderAll();
f.add(ba);$("#lineSlide").slider({value:5});$("#txtPencilClrVal").val("#000000");$("#txtPencilClrHexa").val("#000000");$("#txtShapeOutline").val(2);$("#txtShapeOutlineHexavalue").val("#000000");$("#txtShapeOutlineClrVal").val("#000000");$("#txtFillClrVal").val("#000000");$("#txtFillClrHexa").val("#000000")});$("#draw-m").click(function(){$("#hdrTitle").html("Free Hand Drawing Online");$(".wrapLoader").css({display:"block"});null!=d&&(d.destroy(),d=null);$(".wrapLoader").css({display:"block"});$("#canvasTextBox").hide();
$(".sub-default-lft").css("background","#EEEEEE");$(".sub-default-lft").css("color","#424242");$(this).find("div").css("background","#044218");$(this).find("div").css("color","#fff");(function(){e?h(imagefile,function(){R()}):(R(),$(".wrapLoader").css({display:"none"}))})()});$(".clsEraser").click(function(){f.freeDrawingBrush.color="";f.renderAll()});$("#txtPencilClrHexa").keyup(function(){e=!0;$("#txtPencilClrVal").val($(this).val());f.freeDrawingBrush.color=$(this).val();f.renderAll()});$("#txtPencilClrVal").change(function(){e=
!0;$("#txtPencilClrHexa").val($(this).val());f.freeDrawingBrush.color=$(this).val();f.renderAll()});$("#drawApply").click(function(){e&&ea(function(){R()})});$("#ancZIn").click(function(){$("#hdrTitle").html("Online Image Editor");$(".subProperties").hide();null!=d&&(d.destroy(),d=null);$("#canvasTextBox").hide();$("#isource").hide();$("#canvas-box").show();$(".sub-default-lft").css("background","#EEEEEE");$(".sub-default-lft").css("color","#424242");$("#cc").layout("panel","east").panel({title:"Help",
iconCls:"icon-help mini-icon"});$("#help-options").show();var a=parseInt($("#zoomSlide").val())+10;$("#zoomSlide").slider({value:a});c.height=Math.ceil(n/m*a);c.width=a;c.set({hasControls:!1,hasRotatingPoint:!1,hasBorders:!1,selectable:!0});c.setAngle(0);g.centerObject(c);c.setCoords();g.setActiveObject(c);g.renderAll()});$("#ancZOut").click(function(){$("#hdrTitle").html("Online Image Editor");$(".subProperties").hide();null!=d&&(d.destroy(),d=null);$("#canvasTextBox").hide();$("#isource").hide();
$("#canvas-box").show();$(".sub-default-lft").css("background","#EEEEEE");$(".sub-default-lft").css("color","#424242");$("#cc").layout("panel","east").panel({title:"Help",iconCls:"icon-help mini-icon"});$("#help-options").show();var a=parseInt($("#zoomSlide").val())-10;$("#zoomSlide").slider({value:a});c.height=Math.ceil(n/m*a);c.width=a;c.set({hasControls:!1,hasRotatingPoint:!1,hasBorders:!1,selectable:!0});c.setAngle(0);g.centerObject(c);c.setCoords();g.setActiveObject(c);g.renderAll()});g.on("mouse:move",
function(a){$("#x_axis").val(parseInt(a.e.offsetX-c.left));$("#y_axis").val(parseInt(a.e.offsetY-c.top));var b=g.getContext("2d"),d=g.getPointer(a.e);a=parseInt(d.x);d=parseInt(d.y);a=b.getImageData(a,d,1,1).data;b="rgb("+a[0]+" , "+a[1]+" ,"+a[2]+")";a="#"+("000000"+F(a[0],a[1],a[2])).slice(-6);$("#hexaColor").val(a);$("#hexaColorPicker").val(a);$("#txtColor").val(b)});$("#hexaColorPicker").click(function(a){a.preventDefault()});$("#canvasTextBox").on("mousemove","#dynamicImg",function(a){var b=
$(this).offset();$("#x_axis").val(a.pageX-b.left);$("#y_axis").val(a.pageY-b.top)});$("#help-options").show();$("#help-m").click(function(){$("#hdrTitle").html("Online Image Editor");$("#cc").layout("panel","east").panel("options").collapsed&&$("#cc").layout("expand","east");$(".sub-default-lft").css("background","#EEEEEE");$(".sub-default-lft").css("color","#424242");$(".subProperties").hide();$("#help-options").show();$("#cc").layout("panel","east").panel({title:"Help",iconCls:"icon-help"});$(".wrapLoader").css({display:"block"});
h(imagefile,function(){})});var va=$(".easyui-accordion").accordion("panels");$.each(va,function(){this.panel("collapse")});$("#helpWindow").window("close");$(".ancHelp").click(function(){$("#helpWindow").window("close");var a="https://www.tutorialspoint.com/image_editor/images/help/"+$(this).attr("data-img")+".jpg";$("#helpWindow img").attr("src",a);$("#helpWindow img").show();$("#helpWindow").window("open")});$("#censor-m").click(function(){$("#hdrTitle").html("Censor Photo Online");$(".wrapLoader").css({display:"block"});
null!=d&&(d.destroy(),d=null);$(".sub-default-lft").css("background","#EEEEEE");$(".sub-default-lft").css("color","#424242");$(this).find("div").css("background","#044218");$(this).find("div").css("color","#fff");(function(){e?h(imagefile,function(){S()}):(S(),$(".wrapLoader").css({display:"none"}))})()});$("#censorApply").click(function(){e&&wa(function(){S()})});$("#censorSlide").slider({min:0,max:100,value:0,onChange:function(a,b){var c=Math.ceil(m*a/100),e=Math.ceil(n*a/100);d.setSelect([0,0,
c,e]);$("#censorWidth").val(c);$("#censorHeight").val(e)}});$("#censorPct").change(function(){var a=$(this).val(),b=$("#isource").width(),c=$("#isource").height(),b=Math.ceil(b*a/100),c=Math.ceil(c*a/100);d.setSelect([0,0,b,c]);$("#censorWidth").val(b);$("#censorHeight").val(c);$("#censorSlide").slider({value:a})});var wa=function(a){var b={imagename:imagefile,sessionid:sessionid,width:$("#censorWidth").val(),height:$("#censorHeight").val(),x:$("#xCensor").val(),y:$("#yCensor").val(),optCount:opt_count};
$.ajax({type:"POST",url:base_url+"/censor_image.php",data:b,dataType:"json",beforeSend:function(){$(".wrapLoader").css({display:"block"})},success:function(b){opt_count++;max_count=opt_count;e=!1;$("#ancRedo").addClass("in-active");$("#ancDwn").removeClass("in-active");$("#ancUndo").removeClass("in-active");$("#ancReset").removeClass("in-active");imagefile=b.imagefile;$(".imgsize b").html(b.imagesize+" KB");d.destroy();$("#censorPct option:eq(0)").prop("selected",!0);$("#censorSlide").slider({value:0});
h(imagefile,function(){a()})}})};$("#frame-m").click(function(){$("#hdrTitle").html("Photo Frame Online");$(".wrapLoader").css({display:"block"});null!=d&&(d.destroy(),d=null);$(".sub-default-lft").css("background","#EEEEEE");$(".sub-default-lft").css("color","#424242");$(this).find("div").css("background","#044218");$(this).find("div").css("color","#fff");(function(){e?h(imagefile,function(){T()}):(T(),$(".wrapLoader").css({display:"none"}))})()});$("#frameApply").click(function(){e&&xa(function(){T()})});
var xa=function(a){$.ajax({type:"POST",url:base_url+"/frame_image.php",data:{imagename:imagefile,sessionid:sessionid,frameid:t,optCount:opt_count},dataType:"json",beforeSend:function(){$(".wrapLoader").css({display:"block"})},success:function(b){opt_count++;max_count=opt_count;e=!1;$("#ancRedo").addClass("in-active");$("#ancDwn").removeClass("in-active");$("#ancUndo").removeClass("in-active");$("#ancReset").removeClass("in-active");imagefile=b.imagefile;h(imagefile,function(){a()})}})};$(".frame-effect").click(function(){t=
$(this).attr("data-frame");$.ajax({type:"POST",url:base_url+"/frame_image.php",data:{imagename:imagefile,sessionid:sessionid,frameid:t,optCount:opt_count},dataType:"json",beforeSend:function(){$(".wrapLoader").css({display:"block"})},success:function(a){e=!0;$("#ancRedo").addClass("in-active");$("#ancDwn").removeClass("in-active");$("#ancUndo").removeClass("in-active");$("#ancReset").removeClass("in-active");h(a.imagefile,function(){e=!0})}})});$("#selFrame").change(function(){t=$(this).val();$.ajax({type:"POST",
url:base_url+"/frame_image.php",data:{imagename:imagefile,sessionid:sessionid,frameid:t,optCount:opt_count},dataType:"json",beforeSend:function(){$(".wrapLoader").css({display:"block"})},success:function(a){e=!0;$("#ancRedo").addClass("in-active");$("#ancDwn").removeClass("in-active");$("#ancUndo").removeClass("in-active");$("#ancReset").removeClass("in-active");imagefile=a.imagefile;h(imagefile,function(){e=!0})}})});(function(a){$(".wrapLoader").css({display:"block"});switch(functiontype){case "crop":h(imagefile,
function(){C()});break;case "resize":h(imagefile,function(){z()});break;case "rotate":h(imagefile,function(){A()});break;case "text":h(imagefile,function(){D()});break;case "color":h(imagefile,function(){G()});break;case "exposure":h(imagefile,function(){I()});break;case "blur":h(imagefile,function(){K()});break;case "gamma":h(imagefile,function(){M()});break;case "sharp":h(imagefile,function(){O()});break;case "effects":h(imagefile,function(){B()});break;case "shapes":h(imagefile,function(){Q()});
break;case "draw":h(imagefile,function(){R()});break;case "censor":h(imagefile,function(){S()});break;case "frame":h(imagefile,function(){T()});break;default:h(imagefile,function(){})}})(functiontype)});